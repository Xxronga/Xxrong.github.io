

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="zhizhia">
  <meta name="keywords" content="">
  
    <meta name="description" content="MySQL-reading notes">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQLè¯»ä¹¦ç¬”è®°">
<meta property="og:url" content="http://example.com/2023/11/05/sql-mosh/index.html">
<meta property="og:site_name" content="Xxrongaçš„ä¸ªäººåšå®¢">
<meta property="og:description" content="MySQL-reading notes">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2023/11/05/sql-mosh/image-20231105205930980.png">
<meta property="og:image" content="http://example.com/2023/11/05/sql-mosh/image-20231105205940165.png">
<meta property="og:image" content="http://example.com/2023/11/05/sql-mosh/image-20231105210011981.png">
<meta property="og:image" content="http://example.com/2023/11/05/sql-mosh/image-20231105210024049.png">
<meta property="og:image" content="http://example.com/2023/11/05/sql-mosh/image-20231026170906220.png">
<meta property="article:published_time" content="2023-11-05T12:39:55.872Z">
<meta property="article:modified_time" content="2023-11-07T08:40:55.686Z">
<meta property="article:author" content="Xxronga">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="Coding">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2023/11/05/sql-mosh/image-20231105205930980.png">
  
  
  
  <title>MySQLè¯»ä¹¦ç¬”è®° - Xxrongaçš„ä¸ªäººåšå®¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Hello</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/tree.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQLè¯»ä¹¦ç¬”è®°"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-05 12:39" pubdate>
          2023å¹´11æœˆ5æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          25k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          212 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">MySQLè¯»ä¹¦ç¬”è®°</h1>
            
            
              <div class="markdown-body">
                
                <p> MySQL-reading notes</p>
<span id="more"></span>

<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1UE41147KC/?p=8&spm_id_from=pageDriver&vd_source=50339af4080e63c88cca799f0870a5a1">https://www.bilibili.com/video/BV1UE41147KC/?p=8&amp;spm_id_from=pageDriver&amp;vd_source=50339af4080e63c88cca799f0870a5a1</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/222865842">https://zhuanlan.zhihu.com/p/222865842</a></p>
<p>ğŸ’›<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/222932740">https://zhuanlan.zhihu.com/p/222932740</a></p>
<hr>
<p>æ•°æ®åº“æ˜¯ä¸€ä¸ªä»¥å¯è½»æ˜“è·å–å½¢å¼æ¥å­˜å‚¨çš„æ•°æ®çš„é›†åˆ</p>
<p>ä¸ºäº†ç®¡ç†æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç§å«åšæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ æˆ–DBMS çš„è½¯ä»¶åº”ç”¨ã€‚</p>
<p><img src="/2023/11/05/sql-mosh/image-20231105205930980.png" srcset="/img/loading.gif" lazyload alt="image-20231105205930980"></p>
<p>DBMSè¢«å½’ä¸ºä¸¤å¤§ç±»ï¼šå…³ç³»å‹å’Œéå…³ç³»å‹ï¼ˆNoSQLï¼‰</p>
<ul>
<li><p>åœ¨<u>å…³ç³»å‹æ•°æ®åº“</u>ä¸­ï¼Œæˆ‘ä»¬æŠŠæ•°æ®å­˜å‚¨åœ¨åˆ©ç”¨å…³ç³»äº’ç›¸é“¾æ¥çš„è¡¨ä¸­ã€‚</p>
<p><img src="/2023/11/05/sql-mosh/image-20231105205940165.png" srcset="/img/loading.gif" lazyload alt="image-20231105205940165"></p>
</li>
<li><p>åœ¨<u>éå…³ç³»å‹æ•°æ®åº“</u>ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰è¡¨æˆ–è€…å…³ç³»ã€‚ï¼ˆéå…³ç³»å‹DBMSæ— æ³•è¯»å–SQLè¯­è¨€ï¼‰</p>
</li>
</ul>
<h1 id="æ•°æ®æ¦‚è¦"><a href="#æ•°æ®æ¦‚è¦" class="headerlink" title="æ•°æ®æ¦‚è¦"></a>æ•°æ®æ¦‚è¦</h1><p>è¯¾ç¨‹ä¸€å…±ç”¨åˆ°å››ä¸ªæ•°æ®åº“ï¼Œåˆ†åˆ«æ˜¯</p>
<ol>
<li>sql_invoicingï¼ˆå‘ç¥¨æ•°æ®åº“ï¼‰</li>
<li>sql_storeï¼ˆå•†åº—æ•°æ®åº“ï¼‰</li>
<li>sql_inventoryï¼ˆå­˜è´§æ•°æ®åº“ï¼‰</li>
<li>sql_hrï¼ˆäººåŠ›èµ„æºæ•°æ®åº“ï¼‰</li>
</ol>
<p>å…¶ä¸­ï¼Œä¸»è¦æ˜¯å‰ä¸¤ä¸ªæ•°æ®åº“ç”¨çš„æ¯”è¾ƒå¤šï¼Œåä¸¤ä¸ªæ•°æ®åº“åªæ˜¯åœ¨ç‰¹å®šä¸»é¢˜ä¸‹è®²è¿‡ä¸€ä¸¤æ¬¡ï¼Œç»“æ„ç®€å•ã€‚</p>
<h2 id="1-sql-store"><a href="#1-sql-store" class="headerlink" title="1. sql_store"></a>1. sql_store</h2><h1 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€â€“å¢åˆ æŸ¥æ”¹"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€â€“å¢åˆ æŸ¥æ”¹" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€â€“å¢åˆ æŸ¥æ”¹"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€â€“å¢åˆ æŸ¥æ”¹</h1><h2 id="ã€ç¬¬ä¸€ç« ã€‘é¢„å¤‡å·¥ä½œ"><a href="#ã€ç¬¬ä¸€ç« ã€‘é¢„å¤‡å·¥ä½œ" class="headerlink" title="ã€ç¬¬ä¸€ç« ã€‘é¢„å¤‡å·¥ä½œ"></a>ã€ç¬¬ä¸€ç« ã€‘é¢„å¤‡å·¥ä½œ</h2><h2 id="ã€ç¬¬äºŒç« ã€‘åœ¨å•ä¸€è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®"><a href="#ã€ç¬¬äºŒç« ã€‘åœ¨å•ä¸€è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®" class="headerlink" title="ã€ç¬¬äºŒç« ã€‘åœ¨å•ä¸€è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®"></a>ã€ç¬¬äºŒç« ã€‘åœ¨å•ä¸€è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®</h2><h3 id="1-é€‰æ‹©è¯­å¥"><a href="#1-é€‰æ‹©è¯­å¥" class="headerlink" title="1.é€‰æ‹©è¯­å¥"></a>1.é€‰æ‹©è¯­å¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-operator">/</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span> <span class="hljs-comment">-- çºµå‘ç­›é€‰åˆ—ï¼Œç”šè‡³å¯ä»¥æ˜¯å¸¸æ•°</span><br><span class="hljs-keyword">FROM</span> customers <span class="hljs-comment">-- é€‰æ‹©è¡¨</span><br><span class="hljs-comment">-- WHERE customer_id=1 -- æ¨ªå‘åˆ é€‰è¡¨</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> first_name <span class="hljs-comment">-- æ’åº</span><br><br><span class="hljs-comment">-- å•è¡Œæ³¨é‡Š</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å¤šè¡Œæ³¨é‡Š</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<h3 id="2-é€‰æ‹©å­å¥"><a href="#2-é€‰æ‹©å­å¥" class="headerlink" title="2. é€‰æ‹©å­å¥"></a>2. é€‰æ‹©å­å¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span> <br>	<span class="hljs-keyword">DISTINCT</span> last_name,<br>	first_name,<br>	points.<br>	(points <span class="hljs-operator">+</span> <span class="hljs-number">70</span>) <span class="hljs-operator">%</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> discount_factor<span class="hljs-operator">/</span><span class="hljs-string">&#x27;discount factor&#x27;</span><br><span class="hljs-keyword">FROM</span> customers<br></code></pre></td></tr></table></figure>

<h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- return all the products</span><br><span class="hljs-comment">-- name </span><br><span class="hljs-comment">-- unit price</span><br><span class="hljs-comment">-- new price (unit price * 1.1)</span><br><br><span class="hljs-keyword">SELECT</span><br>	name,<br>	unit_price,<br>	unit_price <span class="hljs-operator">*</span> <span class="hljs-number">1.1</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;new price&#x27;</span><br><span class="hljs-keyword">FROM</span> products<br></code></pre></td></tr></table></figure>

<h3 id="3-where-å­—å¥"><a href="#3-where-å­—å¥" class="headerlink" title="3. where å­—å¥"></a>3. where å­—å¥</h3><blockquote>
<p>ç­›é€‰æ•°æ®;</p>
<p>æ¯”è¾ƒè¿ç®—ç¬¦ &gt;, &lt;, &#x3D;, &lt;&#x3D;, &gt;&#x3D;, !&#x3D;, &#x2F;, &lt;&gt;</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> points <span class="hljs-operator">&gt;</span> <span class="hljs-number">3000</span><br><span class="hljs-operator">/</span> <span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;va&#x27;</span><br></code></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å¯¹æ—¥æœŸæˆ–æ–‡æœ¬è¿›è¡Œæ¯”è¾ƒè¿ç®—ï¼Œæ³¨æ„SQLé‡Œçš„æ—¥æœŸè¦ç”¨å¼•å·åŒ…è£¹</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> birth_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span><br></code></pre></td></tr></table></figure>

<h3 id="4-AND-OR-NOTè¿ç®—ç¬¦"><a href="#4-AND-OR-NOTè¿ç®—ç¬¦" class="headerlink" title="4. AND, OR, NOTè¿ç®—ç¬¦"></a>4. AND, OR, NOTè¿ç®—ç¬¦</h3><p>ç”¨é€»è¾‘è¿ç®—ç¬¦andï¼Œorï¼Œnotè¿›è¡Œå¤šé‡æ¡ä»¶ç­›é€‰æ‰§è¡Œä¼˜å…ˆçº§ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> birth_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span> <span class="hljs-keyword">AND</span> points <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span><br><span class="hljs-operator">/</span><span class="hljs-keyword">WHERE</span> birth_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span> <span class="hljs-keyword">OR</span> <br>      points <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">AND</span> state <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;VA&#x27;</span><br></code></pre></td></tr></table></figure>

<p><strong>ANDä¼˜å…ˆçº§é«˜äºORï¼Œä½†æœ€å¥½åŠ æ‹¬å·ï¼Œæ›´æ¸…æ™°</strong></p>
<p>NOTç”¨æ³•</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> (birth_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span> <span class="hljs-keyword">OR</span> points <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure>

<p>å»æ‹¬å·ç­‰ä»·äº</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> birth_date <span class="hljs-operator">&lt;=</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span> <span class="hljs-keyword">AND</span> points <span class="hljs-operator">&lt;=</span> <span class="hljs-number">1000</span><br></code></pre></td></tr></table></figure>

<h3 id="5-IN-è¿ç®—ç¬¦"><a href="#5-IN-è¿ç®—ç¬¦" class="headerlink" title="5. IN è¿ç®—ç¬¦"></a>5. IN è¿ç®—ç¬¦</h3><p>ç”¨INè¿ç®—ç¬¦å°†æŸä¸€å±æ€§<strong>ä¸å¤šä¸ªå€¼ï¼ˆä¸€ç³»åˆ—å€¼ï¼‰è¿›è¡Œæ¯”è¾ƒ</strong><br>å®è´¨æ˜¯å¤šé‡ç›¸ç­‰æ¯”è¾ƒè¿ç®—æ¡ä»¶çš„ç®€åŒ–</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;va&#x27;</span> <span class="hljs-keyword">OR</span> state <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;fl&#x27;</span> <span class="hljs-keyword">OR</span> state <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ga&#x27;</span><br></code></pre></td></tr></table></figure>

<p>ä¸èƒ½ <code>state = &#39;va&#39; OR &#39;fl&#39; OR &#39;ga&#39;</code> å› ä¸ºæ•°å­¦å’Œæ¯”è¾ƒè¿ç®—ä¼˜å…ˆäºé€»è¾‘è¿ç®—ï¼ŒåŠ æ‹¬å· <code>state = (&#39;va&#39; OR &#39;fl&#39; OR &#39;ga&#39;)</code> ä¹Ÿä¸è¡Œï¼Œé€»è¾‘è¿ç®—ç¬¦åªèƒ½é“¾æ¥å¸ƒæ—å€¼ã€‚</p>
<p>ç”¨ IN æ“ä½œç¬¦ç®€åŒ–è¯¥æ¡ä»¶</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> state <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;va&#x27;</span>, <span class="hljs-string">&#x27;fl&#x27;</span>, <span class="hljs-string">&#x27;ga&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>å¯åŠ NOT</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> state <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;va&#x27;</span>, <span class="hljs-string">&#x27;fl&#x27;</span>, <span class="hljs-string">&#x27;ga&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="6-BETWEENè¿ç®—ç¬¦"><a href="#6-BETWEENè¿ç®—ç¬¦" class="headerlink" title="6. BETWEENè¿ç®—ç¬¦"></a>6. BETWEENè¿ç®—ç¬¦</h3><p>ç”¨äºè¡¨è¾¾<strong>èŒƒå›´</strong>å‹æ¡ä»¶</p>
<blockquote>
<ul>
<li>ç”¨ANDè€Œéæ‹¬å·</li>
<li><strong>é—­åŒºé—´ï¼ŒåŒ…å«ä¸¤ç«¯ç‚¹</strong></li>
<li>ä¹Ÿå¯ç”¨äºæ—¥æœŸï¼Œæ¯•ç«Ÿæ—¥æœŸæœ¬è´¨ä¹Ÿæ˜¯æ•°å€¼ï¼Œæ—¥æœŸä¹Ÿæœ‰å¤§å°ï¼ˆæ—©æ™šï¼‰ï¼Œå¯æ¯”è¾ƒè¿ç®—</li>
<li>åŒ IN ä¸€æ ·ï¼ŒBETWEEN æœ¬è´¨ä¹Ÿæ˜¯ä¸€ç§ç‰¹å®šçš„ å¤šé‡æ¯”è¾ƒè¿ç®—æ¡ä»¶ çš„ç®€åŒ–</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> customers<br><span class="hljs-keyword">where</span> points <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">and</span> points <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure>

<p>ç­‰æ•ˆç®€åŒ–ä¸ºï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> points <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure>

<h3 id="7-LIKEè¿ç®—ç¬¦"><a href="#7-LIKEè¿ç®—ç¬¦" class="headerlink" title="7.LIKEè¿ç®—ç¬¦"></a>7.LIKEè¿ç®—ç¬¦</h3><p>æ¨¡ç³ŠæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å…·æœ‰æŸç§æ¨¡å¼çš„å­—ç¬¦ä¸²çš„è®°å½•ã€è¡Œ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> last_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;brush%&#x27;</span> <span class="hljs-operator">/</span> <span class="hljs-string">&#x27;b___y&#x27;</span><br></code></pre></td></tr></table></figure>

<p>å¼•å·é‡Œå†™ä¸Šæƒ³è¦çš„å­—ç¬¦ä¸²æ¨¡å¼ï¼Œæ³¨æ„SQLå‡ ä¹ä¸åŒºåˆ†å¤§å°å†™</p>
<p>ä¸¤ç§é€šé…ç¬¦ï¼š</p>
<ul>
<li><code>%</code> ä»»ä½•ä¸ªæ•°ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰çš„å­—ç¬¦ï¼ˆ<strong>ç”¨çš„æ›´å¤š</strong>ï¼‰</li>
<li><code>_</code> å•ä¸ªå­—ç¬¦</li>
</ul>
<p><strong>ç»ƒä¹ </strong>ï¼š</p>
<p>åˆ†åˆ«é€‰æ‹©æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„é¡¾å®¢ï¼š</p>
<ol>
<li><p>åœ°å€åŒ…å« â€˜TRAILâ€™ æˆ– â€˜AVENUEâ€™</p>
</li>
<li><p>ç”µè¯å·ç ä»¥ 9 ç»“æŸ</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> address <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%Trail%&#x27;</span> <span class="hljs-keyword">OR</span> <br>	  address <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%Avenue%&#x27;</span><br>	  <br>	  <br><span class="hljs-keyword">WHERE</span> phone <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%9&#x27;</span><br></code></pre></td></tr></table></figure>

<ol start="8">
<li>REGEXPè¿ç®—ç¬¦</li>
</ol>
<p>æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨æœç´¢å­—ç¬¦ä¸²æ–¹é¢æ›´ä¸ºå¼ºå¤§</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> customers<br><span class="hljs-keyword">where</span> last_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%field%&#x27;</span><br></code></pre></td></tr></table></figure>

<p>ç­‰æ•ˆäº</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;field&#x27;</span><br></code></pre></td></tr></table></figure>

<p>æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“ï¼š</p>
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>æ„ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>å¼€å¤´</td>
</tr>
<tr>
<td>$</td>
<td>ç»“å°¾</td>
</tr>
<tr>
<td>[abc]</td>
<td>å«abcçš„ä»»æ„å­—æ¯</td>
</tr>
<tr>
<td>[a-c]</td>
<td>å«aåˆ°cçš„ä»»æ„å­—æ¯</td>
</tr>
<tr>
<td>|</td>
<td>logical or</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;^mac|field$|rose&#x27;</span> <br><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;[gi]e|e[fmq]&#x27;</span> <span class="hljs-comment">-- æŸ¥æ‰¾å«ge/ieæˆ–ef/em/eqçš„</span><br><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;[a-h]e|e[c-j]&#x27;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">åˆ†åˆ«é€‰æ‹©æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„é¡¾å®¢ï¼š<br># <span class="hljs-number">1.</span> <span class="hljs-keyword">first</span> names æ˜¯ ELKA æˆ– AMBUR<br># <span class="hljs-number">2.</span> <span class="hljs-keyword">last</span> names ä»¥ EY æˆ– <span class="hljs-keyword">ON</span> ç»“æŸ<br># <span class="hljs-number">3.</span> <span class="hljs-keyword">last</span> names ä»¥ MY å¼€å¤´ æˆ–åŒ…å« SE<br># <span class="hljs-number">4.</span> <span class="hljs-keyword">last</span> names åŒ…å« BR æˆ– BU<br><br><span class="hljs-keyword">where</span> first_name regexp <span class="hljs-string">&#x27;elka|ambur&#x27;</span><br><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;EY$|ON$&#x27;</span><br><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;^MY|SE&#x27;</span><br><span class="hljs-keyword">where</span> last_name regexp <span class="hljs-string">&#x27;BR|BU&#x27;</span><br></code></pre></td></tr></table></figure>

<h3 id="9-IS-NULLè¿ç®—ç¬¦"><a href="#9-IS-NULLè¿ç®—ç¬¦" class="headerlink" title="9. IS NULLè¿ç®—ç¬¦"></a>9. IS NULLè¿ç®—ç¬¦</h3><p>æ‰¾å‡ºç©ºå€¼ï¼Œæ‰¾å‡ºæœ‰æŸç§å±æ€§ç¼ºå¤±çš„è®°å½•</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>æ‰¾å‡ºç”µè¯å·ç ç¼ºå¤±çš„é¡¾å®¢ï¼Œä¹Ÿè®¸å‘ä¸ªé‚®ä»¶æé†’ä»–ä»¬ä¹‹ç±»</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> customers<br><span class="hljs-keyword">where</span> phone <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span><span class="hljs-operator">/</span><span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span><br></code></pre></td></tr></table></figure>

<p>conclusion</p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ï¼š&gt; &lt; &#x3D; &gt;&#x3D; &lt;&#x3D; !&#x3D;</li>
<li>é€»è¾‘è¿ç®—ï¼šAND, OR, NOT</li>
<li>ç‰¹æ®Šçš„æ¯”è¾ƒè¿ç®—ï¼šIN, BETWEEN, LIKE, REGEXP, IS NULL</li>
</ul>
<p><code>ä¼˜å…ˆçº§ï¼šæ•°å­¦-&gt;æ¯”è¾ƒ-&gt;é€»è¾‘</code></p>
<h3 id="10-ORDER-BYå­å¥"><a href="#10-ORDER-BYå­å¥" class="headerlink" title="10. ORDER BYå­å¥"></a>10. ORDER BYå­å¥</h3><p>æ’åºè¯­å¥</p>
<ol>
<li>å¯å¤šåˆ—ï¼ˆå…ˆæŒ‰aæ’åºï¼Œaç›¸åŒçš„å†…éƒ¨å†ç”¨bæ’åºï¼‰</li>
<li>å¯ä»¥æ˜¯åˆ—é—´çš„æ•°å­—è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬æ²¡è¢«selectçš„åˆ—ä¹Ÿå¯ä»¥ä½œæ’åºæ¡ä»¶</li>
<li>ä¹Ÿå¯ä»¥åŒ…å«ä»»ä½•åˆ—&#x2F;ä¹‹å‰å®šä¹‰å¥½çš„åˆ«ååˆ—</li>
<li>ä»»ä½•ä¸€ä¸ªæ’åºä¾æ®åˆ—åé¢éƒ½å¯é€‰DESCï¼ˆé™åºï¼‰</li>
</ol>
<blockquote>
<p> æ³¨ï¼šworkbench ä¸­æ‰³æ‰‹å›¾æ ‡å¯æ‰“å¼€è¡¨æ ¼çš„è®¾è®¡æ¨¡å¼ï¼ŒæŸ¥çœ‹æˆ–ä¿®æ”¹è¡¨ä¸­å„åˆ—ï¼ˆå±æ€§ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è°æ˜¯ä¸»é”®ã€‚çœç•¥æ’åºè¯­å¥çš„è¯ä¼šé»˜è®¤æŒ‰ä¸»é”®æ’åº</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"># è®¢å•<span class="hljs-number">2</span>çš„å•†å“æŒ‰æ€»ä»·é™åºæ’åˆ—<br>## ä»¥æ€»ä»·çš„æ•°å­¦è¡¨è¾¾å¼ä¸ºæ’åºä¾æ®<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> order_items<br><span class="hljs-keyword">where</span> order_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> quantity <span class="hljs-operator">*</span> unit_price <span class="hljs-keyword">desc</span><br><br>## å…ˆå®šä¹‰æ€»ä»·åˆ«åï¼Œåœ¨ä»¥åˆ«åä¸ºæ’åºä¾æ®<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, quantity <span class="hljs-operator">*</span> unit_price  <span class="hljs-keyword">AS</span> total_price<br><span class="hljs-keyword">FROM</span> order_items<br><span class="hljs-keyword">where</span> order_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> total_price <span class="hljs-keyword">desc</span><br></code></pre></td></tr></table></figure>

<h3 id="11-LIMITå­å¥"><a href="#11-LIMITå­å¥" class="headerlink" title="11. LIMITå­å¥"></a>11. LIMITå­å¥</h3><p>é™åˆ¶è¿”å›ç»“æœçš„è®°å½•æ•°é‡ï¼Œâ€œå‰Nä¸ªâ€ æˆ– â€œè·³è¿‡Mä¸ªåçš„å‰Nä¸ªâ€</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> customers<br>limit <span class="hljs-number">3</span> <span class="hljs-operator">/</span> <span class="hljs-number">300</span> <span class="hljs-operator">/</span> <span class="hljs-number">6</span>, <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<p>6, 3 è¡¨ç¤ºè·³è¿‡å‰6ä¸ªï¼Œå–ç¬¬7~9ä¸ªï¼Œ6æ˜¯åç§»é‡ï¼Œ</p>
<h2 id="ã€ç¬¬ä¸‰ç« ã€‘åœ¨å¤šå¼ è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®"><a href="#ã€ç¬¬ä¸‰ç« ã€‘åœ¨å¤šå¼ è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®" class="headerlink" title="ã€ç¬¬ä¸‰ç« ã€‘åœ¨å¤šå¼ è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®"></a>ã€ç¬¬ä¸‰ç« ã€‘åœ¨å¤šå¼ è¡¨æ ¼ä¸­æ£€ç´¢æ•°æ®</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/222968981">https://zhuanlan.zhihu.com/p/222968981</a></p>
<h3 id="1-å†…è¿æ¥"><a href="#1-å†…è¿æ¥" class="headerlink" title="1.å†…è¿æ¥"></a>1.å†…è¿æ¥</h3><p>å„è¡¨åˆ†å¼€å­˜æ”¾æ˜¯ä¸ºäº†å‡å°‘é‡å¤ä¿¡æ¯å’Œæ–¹ä¾¿ä¿®æ”¹ï¼Œéœ€è¦æ—¶å¯ä»¥æ ¹æ®ç›¸äº’ä¹‹é—´çš„å…³ç³»è¿æ¥æˆç›¸åº”çš„åˆå¹¶è¯¦æƒ…è¡¨ä»¥æ»¡è¶³ç›¸åº”çš„æŸ¥è¯¢ã€‚FROM JOIN ON è¯­å¥å°±æ˜¯å‘Šè¯‰sqlï¼š å°†å“ªå‡ å¼ è¡¨ä»¥ä»€ä¹ˆåŸºç¡€è¿æ¥&#x2F;åˆå¹¶èµ·æ¥ã€‚</p>
<p>ä»åå¾€å‰çœ‹æŸ¥è¯¢è¯­å¥ï¼š</p>
<ul>
<li>åé¢çš„<code>from</code> è¡¨A <code>join</code> è¡¨B <code>on</code> ABçš„å…³ç³»ï¼Œå°±æ˜¯ä»¥æŸäº›ç›¸å…³è”çš„åˆ—ä¸ºä¾æ®ï¼Œè¿›è¡Œå¤šè¡¨åˆå¹¶å¾—åˆ°æ‰€éœ€çš„è¯¦æƒ…è¡¨</li>
<li>å‰é¢çš„selectå°±æ˜¯åœ¨åˆå¹¶è¯¦æƒ…è¡¨ä¸­æ‰¾åˆ°æ‰€éœ€çš„åˆ—</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">select</span><br>	order_id,<br>    o.customer_id,<br>    first_name,<br>    last_name<br><span class="hljs-keyword">from</span> orders <span class="hljs-keyword">as</span> o<br><span class="hljs-keyword">join</span> customers c<br>	<span class="hljs-keyword">on</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<br></code></pre></td></tr></table></figure>

<p>ä¹‹å‰åœ¨<code>SELECT</code>ä¸­ç»™é€‰å®šçš„åˆ—åŠ åˆ«åä¸»è¦æ˜¯ä¸ºäº†å¾—åˆ°æ›´æœ‰æ„ä¹‰çš„åˆ—åï¼Œè¿™é‡Œå†<code>FROM...JOIN...</code>åŠ åˆ«åä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–ã€‚</p>
<p><code>o.</code>æ˜¯åˆ«åï¼Œæ˜¯åœ¨åé¢çš„<code>FROM</code>è¯­å¥é‡Œå®šä¹‰çš„ï¼Œä¸ç”¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªè¡¨éƒ½æœ‰<code>customer_id</code>ï¼Œè¿™é‡ŒæŒ‡å®šä»»æ„ä¸€ä¸ªè¡¨çš„éƒ½è¡Œï¼Œå› ä¸ºæ˜¯æŒ‰ç›¸åŒçš„<code>customer_id</code>æ¥é“¾æ¥ä¸¤ä¸ªè¡¨ã€‚æ€»ä¹‹é€‰æ‹©å¤šç§è¡¨é‡Œéƒ½æœ‰çš„åŒååˆ—æ—¶ï¼Œå¿…é¡»åŠ ä¸Šè¡¨åå‰ç¼€æ¥æ˜ç¡®åˆ—çš„æ¥æºã€‚</p>
<p>åŒæ—¶ç”¨äº†åˆ«ååå…¶ä»–åœ°æ–¹ï¼ˆåŒ…æ‹¬å‰é¢çš„<code>SELECT</code>è¯­å¥ï¼Œå› ä¸ºSQLæœ€å…ˆæ‰§è¡Œ<code>FROM...JOIN...</code>ï¼‰ç”¨åˆ«åï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å› æ­¤æœ€å¥½å…ˆ<code>SELECT * FROM</code>é€‰æ‹©å…¨éƒ¨ï¼Œç­‰å†™å¥½äº†<code>FROM...JOIN...ON...</code>ç­‰åé¢çš„è¯­å¥ï¼Œå†å›å¤´å»<code>SELECT</code>é‡Œç»†åŒ–æ˜ç¡®éœ€è¦çš„åˆ—ã€‚</p>
<h3 id="2-è·¨æ•°æ®åº“è¿æ¥ï¼ˆåˆå¹¶ï¼‰"><a href="#2-è·¨æ•°æ®åº“è¿æ¥ï¼ˆåˆå¹¶ï¼‰" class="headerlink" title="2.è·¨æ•°æ®åº“è¿æ¥ï¼ˆåˆå¹¶ï¼‰"></a>2.è·¨æ•°æ®åº“è¿æ¥ï¼ˆåˆå¹¶ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">use sql_store;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> order_items oi<br><span class="hljs-keyword">join</span> sql_inventory.products p<br>	<span class="hljs-keyword">on</span> oi.product_id <span class="hljs-operator">=</span> p.product_id<br></code></pre></td></tr></table></figure>

<p>æœ‰æ—¶éœ€è¦é€‰å–ä¸åŒåº“çš„è¡¨çš„åˆ—ï¼Œå…¶ä»–éƒ½ä¸€æ ·ï¼Œåªéœ€è¦å¯¹<code>join</code>é‡Œéæ­£åœ¨ä½¿ç”¨<code>use</code>çš„åº“çš„è¡¨è¦åŠ ä¸Šåº“åå‰ç¼€è€Œå·²ã€‚</p>
<h3 id="3-å¤šè¡¨è¿æ¥"><a href="#3-å¤šè¡¨è¿æ¥" class="headerlink" title="3.å¤šè¡¨è¿æ¥"></a>3.å¤šè¡¨è¿æ¥</h3><p><code>FROM</code>ä¸€ä¸ªæ ¸å¿ƒè¡¨Aï¼Œç”¨å¤šä¸ª<code>JOIN...ON...</code>åˆ†åˆ«é€šè¿‡ä¸åŒçš„é“¾æ¥å…³ç³»é“¾æ¥ä¸åŒçš„è¡¨B,C,D,â€¦, é€šè¿‡æ˜¯è®©è¡¨Bã€Cã€Dâ€¦ä¸ºè¡¨Aæä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯ä»è€Œåˆå¹¶ä¸ºä¸€å¼ è¯¦æƒ…åˆå¹¶ç‰ˆAè¡¨ï¼Œå³</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">FROM</span> A<br>	<span class="hljs-keyword">JOIN</span> B <span class="hljs-keyword">ON</span> ABçš„å…³ç³»<br>	<span class="hljs-keyword">JOIN</span> C <span class="hljs-keyword">ON</span> ACçš„å…³ç³»<br>	<span class="hljs-keyword">JOIN</span> D <span class="hljs-keyword">ON</span> ADçš„å…³ç³»<br>	...<br></code></pre></td></tr></table></figure>

<p>å°†å¾—åˆ°ä¸€ä¸ªåˆå¹¶BCDâ€¦ç­‰è¡¨è¯¦ç»†ä¿¡æ¯çš„è¯¦æƒ…åˆå¹¶ç‰ˆAè¡¨</p>
<p>Case1ï¼šè®¢å•è¡¨åŒæ—¶é“¾æ¥é¡¾å®¢è¡¨å’Œè®¢å•çŠ¶æ€è¡¨ï¼Œåˆå¹¶ä¸ºæœ‰é¡¾å®¢å’ŒçŠ¶æ€ä¿¡æ¯çš„è¯¦ç»†è®¢å•è¡¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br> <span class="hljs-keyword">SELECT</span> <br> 	o.order_id,<br> 	o.order_date,<br> 	c.first_name,<br> 	c.last_name <br> 	os.name <span class="hljs-keyword">AS</span> status<br> <span class="hljs-keyword">FROM</span> orders o<br> <span class="hljs-keyword">JOIN</span> customers c <br> 	<span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<br> <span class="hljs-keyword">JOIN</span> order_statuses os<br> 	<span class="hljs-keyword">ON</span> o.status <span class="hljs-operator">=</span> os.order_status_id 	<br></code></pre></td></tr></table></figure>

<img src="/2023/11/05/sql-mosh/image-20231105210011981.png" srcset="/img/loading.gif" lazyload alt="image-20231105210011981" style="zoom:50%;">



<h3 id="5-ç¬¦åˆè¿æ¥æ¡ä»¶"><a href="#5-ç¬¦åˆè¿æ¥æ¡ä»¶" class="headerlink" title="5.ç¬¦åˆè¿æ¥æ¡ä»¶"></a>5.ç¬¦åˆè¿æ¥æ¡ä»¶</h3><p>åƒè®¢å•ï¼ˆordersï¼‰è¿™ç§è¡¨ï¼Œorder_idå¯ä»¥å”¯ä¸€è¡¨ç¤ºä¸€æ¡è®°å½•</p>
<img src="/2023/11/05/sql-mosh/image-20231105210024049.png" srcset="/img/loading.gif" lazyload alt="image-20231105210024049" style="zoom:50%;">

<p>åƒè®¢å•é¡¹ç›®ï¼ˆorder_itemsï¼‰è¿™ç§è¡¨ï¼Œ<strong>è®¢å•idå’Œäº§å“idåˆåœ¨ä¸€èµ·æ‰èƒ½å”¯ä¸€è¡¨ç¤ºä¸€æ¡è®°å½•</strong>ï¼Œè¿™å«<strong>å¤åˆä¸»é”®</strong>ï¼›è®¾è®¡æ¨¡å¼ä¸‹ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå­—æ®µéƒ½æœ‰PKæ ‡è¯†ï¼Œè®¢å•é¡¹ç›®å¤‡æ³¨è¡¨ï¼ˆorder_item_notesï¼‰ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªå¤åˆä¸»é”®ï¼Œå› æ­¤ä»–ä»¬ä¸¤åˆå¹¶æ—¶è¦ç”¨å¤åˆæ¡ä»¶ï¼š</p>
<p><code>FROM</code> è¡¨1 <code>JOIN</code> è¡¨2 <code>ON</code> æ¡ä»¶1 <code>ã€ANDã€‘</code> æ¡ä»¶2</p>
<h3 id="6-éšå¼è¿æ¥è¯­æ³•"><a href="#6-éšå¼è¿æ¥è¯­æ³•" class="headerlink" title="6. éšå¼è¿æ¥è¯­æ³•"></a>6. éšå¼è¿æ¥è¯­æ³•</h3><p>ç”¨<code>from where</code>å–ä»£<code>from join on</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">FROM</span> orders o<br><span class="hljs-keyword">JOIN</span> customers c<br>    <span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<br>    <br>    <br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> orders o, customers c<br><span class="hljs-keyword">WHERE</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<br></code></pre></td></tr></table></figure>

<p>å°½é‡åˆ«ç”¨ï¼Œå› ä¸ºè‹¥å¿˜è®°WHEREæ¡ä»¶ç­›é€‰è¯­å¥ï¼Œä¸ä¼šæŠ¥é”™ä½†ä¼šå¾—åˆ°äº¤å‰åˆå¹¶ï¼ˆcross joinï¼‰ç»“æœï¼šå³10æ¡orderä¼šåˆ†åˆ«ä¸10ä¸ªcustomerç»“åˆï¼Œå¾—åˆ°100æ¡è®°å½•ã€‚æœ€å¥½ä½¿ç”¨æ˜¾æ€§åˆå¹¶è¯­æ³•ï¼Œå› ä¸ºä¼šå¼ºåˆ¶è¦æ±‚ä½ å†™åˆå¹¶æ¡ä»¶ONè¯­å¥ï¼Œä¸è‡³äºæ¼æ‰ã€‚</p>
<h3 id="7-å¤–è¿æ¥"><a href="#7-å¤–è¿æ¥" class="headerlink" title="7.å¤–è¿æ¥"></a>7.å¤–è¿æ¥</h3><ol>
<li><code>(INNER) JOIN</code> ç»“æœåªåŒ…å«ä¸¤è¡¨çš„äº¤é›†</li>
<li><code>LEFT/RIGHT(OUTER)JOIN</code>ç»“æœé‡Œé™¤äº†äº¤é›†ï¼Œè¿˜åŒ…å«åªå‡ºç°åœ¨å·¦&#x2F;å³è¡¨ä¸­çš„è®°å½•ã€‚</li>
</ol>
<p>å±•ç¤ºå„äº§å“åœ¨è®¢å•é¡¹ç›®ä¸­å‡ºç°çš„è®°å½•å’Œé”€é‡ï¼Œä¹Ÿè¦åŒ…æ‹¬æ²¡æœ‰è®¢å•çš„äº§å“</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    p.product_id,<br>    p.name, <span class="hljs-comment">-- æˆ–è€…ç›´æ¥name</span><br>    oi.quantity <span class="hljs-comment">-- æˆ–è€…ç›´æ¥quantity</span><br><span class="hljs-keyword">FROM</span> products p<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> order_items oi<br>    <span class="hljs-keyword">ON</span> p.product_id <span class="hljs-operator">=</span> oi.product_id<br></code></pre></td></tr></table></figure>

<p>å½“ä½¿ç”¨å·¦è¿æ¥æ—¶ï¼Œæ‰€æœ‰å·¦è¡¨çš„è®°å½•ä¼šè¢«è¿”å›ï¼Œä¸ç®¡æ¡ä»¶æ­£ç¡®è¿˜æ˜¯é”™è¯¯ã€‚</p>
<h3 id="8-å¤šè¡¨å¤–è¿æ¥"><a href="#8-å¤šè¡¨å¤–è¿æ¥" class="headerlink" title="8.å¤šè¡¨å¤–è¿æ¥"></a>8.å¤šè¡¨å¤–è¿æ¥</h3><p>æŸ¥è¯¢é¡¾å®¢ã€è®¢å•å’Œå‘è´§å•†è®°å½•ï¼Œè¦åŒ…æ‹¬æ‰€æœ‰é¡¾å®¢ï¼ˆåŒ…æ‹¬æ— è®¢å•çš„é¡¾å®¢ï¼‰ï¼Œä¹Ÿè¦åŒ…æ‹¬æ‰€æœ‰è®¢å•ï¼ˆåŒ…æ‹¬æœªå‘å‡ºçš„ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <br>    c.customer_id,<br>    c.first_name,<br>    o.order_id,<br>    sh.name <span class="hljs-keyword">AS</span> shipper<br><span class="hljs-keyword">FROM</span> customers c<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> orders o <span class="hljs-comment">-- åŒ…æ‹¬æ— è®¢å•çš„é¡¾å®¢</span><br>    <span class="hljs-keyword">ON</span> c.customer_id <span class="hljs-operator">=</span> o.customer_id<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> shippers sh  <span class="hljs-comment">-- åŒ…æ‹¬æœªå‘å‡ºçš„</span><br>    <span class="hljs-keyword">ON</span> o.shipper_id <span class="hljs-operator">=</span> sh.shipper_id<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> customer_id<br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>æŸ¥è¯¢ è®¢å• + é¡¾å®¢ + å‘è´§å•† + è®¢å•çŠ¶æ€ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„è®¢å•ï¼ˆåŒ…æ‹¬æœªå‘è´§çš„ï¼‰ï¼Œå…¶å®å°±åªæ˜¯å‰ä¸¤ä¸ªä¼˜å…ˆçº§å˜äº†ä¸€ä¸‹ï¼Œæ˜¯è¦çœ‹å…¨éƒ¨è®¢å•è€Œéå…¨éƒ¨é¡¾å®¢äº†</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <br>	o.order_id,<br>	o.order_date,<br>	c.first_name <span class="hljs-keyword">AS</span> customer,<br>	sh.name <span class="hljs-keyword">AS</span> shipper,<br>	os.name <span class="hljs-keyword">AS</span> status<br><span class="hljs-keyword">FROM</span> orders o<br><span class="hljs-keyword">JOIN</span> customers c<br>	<span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> shippers sh<br>	<span class="hljs-keyword">ON</span> o.shipper_id <span class="hljs-operator">=</span> sh.shipper_id<br><span class="hljs-keyword">JOIN</span> order_statuses os<br>	<span class="hljs-keyword">ON</span> o.status <span class="hljs-operator">=</span> os.order_status_id<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> o.order_id<br></code></pre></td></tr></table></figure>



<h3 id="9-è‡ªæˆ‘å¤–éƒ¨è¿æ¥"><a href="#9-è‡ªæˆ‘å¤–éƒ¨è¿æ¥" class="headerlink" title="9.è‡ªæˆ‘å¤–éƒ¨è¿æ¥"></a>9.è‡ªæˆ‘å¤–éƒ¨è¿æ¥</h3><p>å°±ç”¨å‰é¢é‚£ä¸ªå‘˜å·¥è¡¨çš„ä¾‹å­æ¥è¯´ï¼Œå°±æ˜¯ç”¨<code>LEFT JOIN</code>è®©å¾—åˆ°çš„ å‘˜å·¥-ä¸Šçº§ åˆå¹¶è¡¨ä¹ŸåŒ…æ‹¬è€æ¿æœ¬äººï¼ˆè€æ¿æ²¡æœ‰ä¸Šçº§ï¼Œå³<code> reports_to</code> å­—æ®µä¸ºç©ºï¼Œå¦‚æœç”¨<code> JOIN</code> ä¼šè¢«ç­›æ‰ï¼Œç”¨<code> LEFT JOIN</code> æ‰èƒ½ä¿ç•™ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_hr;<br><br><span class="hljs-keyword">SELECT</span> <br>	e.employee_id,<br>    e.first_name,<br>    m.first_name <span class="hljs-keyword">AS</span> manager<br><span class="hljs-keyword">FROM</span> employees e<br>	<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> employees m<br><span class="hljs-keyword">ON</span> e.reports_to <span class="hljs-operator">=</span> m.employee_id<br></code></pre></td></tr></table></figure>

<h3 id="10-USINGå­—å¥"><a href="#10-USINGå­—å¥" class="headerlink" title="10.USINGå­—å¥"></a>10.USINGå­—å¥</h3><p>å½“ä½œä¸ºåˆå¹¶æ¡ä»¶ï¼ˆjoin conditionï¼‰çš„åˆ—åœ¨ä¸¤ä¸ªè¡¨ä¸­æœ‰ç›¸åŒçš„åˆ—åæ—¶ï¼Œå¯ç”¨ <code>USING (â€¦â€¦, â€¦â€¦)</code> å–ä»£ <code>ON â€¦â€¦ AND â€¦â€¦</code> äºˆä»¥ç®€åŒ–ï¼Œå†…&#x2F;å¤–é“¾æ¥å‡å¯å¦‚æ­¤ç®€åŒ–ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SELECT</span><br>    o.order_id,<br>    c.first_name,<br>    sh.name <span class="hljs-keyword">AS</span> shipper<br><span class="hljs-keyword">FROM</span> orders o<br><span class="hljs-keyword">JOIN</span> customers c<br>    <span class="hljs-keyword">USING</span> (customer_id) <span class="hljs-comment">-- ON o.customer_id = c.customer_id</span><br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> shippers sh<br>    <span class="hljs-keyword">USING</span> (shipper_id) <span class="hljs-comment">-- ON o.shipper_id = c.shipper_id</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> order_id<br></code></pre></td></tr></table></figure>

<p><strong>å¤åˆä¸»é”®</strong>è¡¨é—´å¤åˆè¿æ¥æ¡ä»¶çš„åˆå¹¶ä¹Ÿå¯ç”¨ USINGï¼Œä¸­é—´é€—å·éš”å¼€å°±è¡Œï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> order_items oi<br><span class="hljs-keyword">JOIN</span> order_item_notes oin<br><br><span class="hljs-keyword">ON</span> oi.order_id <span class="hljs-operator">=</span> oin.order_Id <span class="hljs-keyword">AND</span><br>    oi.product_id <span class="hljs-operator">=</span> oin.product_id<br><span class="hljs-operator">/</span><span class="hljs-keyword">USING</span> (order_id, product_id)<br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>sql_invoicingåº“é‡Œï¼Œå°†paymentsã€clientsã€payment_methodsä¸‰å¼ è¡¨åˆå¹¶èµ·æ¥ï¼Œä»¥çŸ¥é“ä»€ä¹ˆæ—¥æœŸå“ªä¸ªé¡¾å®¢ç”¨ä»€ä¹ˆæ–¹å¼ä»˜äº†å¤šå°‘é’±</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><span class="hljs-keyword">SELECT</span> <br>	p.date,<br>    c.name <span class="hljs-keyword">AS</span> client,<br>    p.amount,<br>	pm.name <span class="hljs-keyword">AS</span> payment_method<br><span class="hljs-keyword">FROM</span> clients c<br><span class="hljs-keyword">JOIN</span> payments p<br>	<span class="hljs-keyword">USING</span>(client_id)<br><span class="hljs-keyword">JOIN</span> payment_methods pm<br>	<span class="hljs-keyword">ON</span> pm.payment_method_id <span class="hljs-operator">=</span> p.payment_method<br></code></pre></td></tr></table></figure>

<h3 id="11-è‡ªç„¶è¿æ¥"><a href="#11-è‡ªç„¶è¿æ¥" class="headerlink" title="11.è‡ªç„¶è¿æ¥"></a>11.è‡ªç„¶è¿æ¥</h3><p><code>NATURAL JOIN</code> å°±æ˜¯è®©MySQLè‡ªåŠ¨æ£€ç´¢åŒååˆ—ä½œä¸ºåˆå¹¶æ¡ä»¶ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <br>    o.order_id,<br>    c.first_name<br><span class="hljs-keyword">FROM</span> orders o<br><span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">JOIN</span> customers c<br></code></pre></td></tr></table></figure>

<blockquote>
<p>æœ€å¥½åˆ«ç”¨ï¼Œå› ä¸ºä¸ç¡®å®šåˆå¹¶æ¡ä»¶æ˜¯å¦æ‰¾å¯¹äº†ï¼Œæœ‰æ—¶ä¼šé€ æˆæ— æ³•é¢„æ–™çš„é—®é¢˜ï¼Œç¼–ç¨‹æ—¶ä¿æŒå¯¹ç»“æœçš„<strong>æ§åˆ¶</strong>æ˜¯éå¸¸é‡è¦çš„</p>
<p>ä½†ä¹Ÿè¦çŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œæ··ä¸ªè„¸ç†Ÿï¼Œä¸è¦åˆ«äººç”¨äº†çœ‹ä¸æ‡‚ã€‚</p>
</blockquote>
<h3 id="12-äº¤å‰è¿æ¥"><a href="#12-äº¤å‰è¿æ¥" class="headerlink" title="12.äº¤å‰è¿æ¥"></a>12.äº¤å‰è¿æ¥</h3><p>å¾—åˆ°åå­—å’Œäº§å“çš„æ‰€æœ‰ç»„åˆï¼Œå› æ­¤ä¸éœ€è¦åˆå¹¶æ¡ä»¶ã€‚ å®é™…è¿ç”¨å¦‚ï¼šè¦å¾—åˆ°å°ºå¯¸å’Œé¢œè‰²çš„å…¨éƒ¨ç»„åˆ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <br>    c.first_name <span class="hljs-keyword">AS</span> customer,<br>    p.name <span class="hljs-keyword">AS</span> product<br><span class="hljs-keyword">FROM</span> customers c<br><span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> products p<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> c.first_name<br></code></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯æ˜¾æ€§è¯­æ³•ï¼Œè¿˜æœ‰éšå¼è¯­æ³•ï¼Œä¹‹å‰è®²è¿‡ï¼Œå…¶å®å°±æ˜¯éšå¼å†…å®¹å¹¶å¿½ç•¥WHEREå­å¥ï¼ˆå³åˆå¹¶æ¡ä»¶ï¼‰çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æŠŠ <code>CROSS JOIN</code> æ”¹ä¸ºé€—å·ï¼Œå³ <code>FROM A CROSS JOIN B</code> ç­‰æ•ˆäº <code>FROM A, B</code>ï¼ŒMoshæ›´æ¨èæ˜¾å¼è¯­æ³•ï¼Œå› ä¸ºæ›´æ¸…æ™°</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <br>    c.first_name,<br>    p.name<br><span class="hljs-keyword">FROM</span> customers c, products p<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> c.first_name<br></code></pre></td></tr></table></figure>

<h3 id="13-è”åˆ"><a href="#13-è”åˆ" class="headerlink" title="13.è”åˆ"></a>13.è”åˆ</h3><p><code>FROM â€¦â€¦ JOIN â€¦â€¦</code> å¯å¯¹å¤šå¼ è¡¨è¿›è¡Œæ¨ªå‘åˆ—åˆå¹¶ï¼Œè€Œ <code>â€¦â€¦ UNION â€¦â€¦</code> å¯ç”¨æ¥æŒ‰è¡Œçºµå‘åˆå¹¶å¤šä¸ªæŸ¥è¯¢ç»“æœï¼Œè¿™äº›æŸ¥è¯¢ç»“æœå¯èƒ½æ¥è‡ªç›¸åŒæˆ–ä¸åŒçš„è¡¨</p>
<ul>
<li>åŒä¸€å¼ è¡¨å¯é€šè¿‡<code>UNION</code>æ·»åŠ æ–°çš„åˆ†ç±»å­—æ®µï¼Œå³å…ˆé€šè¿‡åˆ†ç±»æŸ¥è¯¢å¹¶æ·»åŠ æ–°çš„åˆ†ç±»å­—æ®µå†<code>UNION</code>åˆå¹¶ä¸ºå¸¦åˆ†ç±»å­—æ®µçš„æ–°è¡¨ã€‚</li>
<li>ä¸åŒè¡¨é€šè¿‡<code>UNION</code>åˆå¹¶çš„æƒ…å†µå¦‚ï¼šå°†ä¸€å¼ 18å¹´çš„è®¢å•è¡¨å’Œ19å¹´çš„è®¢å•è¡¨çºµå‘åˆå¹¶èµ·æ¥åœ¨ä¸€å¼ è¡¨é‡Œå±•ç¤º</li>
</ul>
<p>æ³¨æ„</p>
<ul>
<li>åˆå¹¶çš„æŸ¥è¯¢ç»“æœå¿…é¡»åˆ—æ•°ç›¸ç­‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
<li>åˆå¹¶è¡¨é‡Œçš„åˆ—åç”±æ’åœ¨ UNION å‰é¢çš„å†³å®š</li>
</ul>
<p>ç»™è®¢å•è¡¨å¢åŠ ä¸€ä¸ªæ–°å­—æ®µâ€”â€”statusï¼Œç”¨ä»¥åŒºåˆ†ä»Šå¹´çš„è®¢å•å’Œä»Šå¹´ä»¥å‰çš„è®¢å•</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br>    <span class="hljs-keyword">SELECT</span> <br>        order_id,<br>        order_date,<br>        <span class="hljs-string">&#x27;Active&#x27;</span> <span class="hljs-keyword">AS</span> status<br>    <span class="hljs-keyword">FROM</span> orders<br>    <span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">&#x27;2019-01-01&#x27;</span><br><br><span class="hljs-keyword">UNION</span><br><br>    <span class="hljs-keyword">SELECT</span> <br>        order_id,<br>        order_date,<br>        <span class="hljs-string">&#x27;Archived&#x27;</span> <span class="hljs-keyword">AS</span> status  <span class="hljs-comment">-- Archived å½’æ¡£</span><br>    <span class="hljs-keyword">FROM</span> orders<br>    <span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">&lt;</span> <span class="hljs-string">&#x27;2019-01-01&#x27;</span>;<br>    <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> order_id<br></code></pre></td></tr></table></figure>



<p>å¯ä»¥çœ‹å‡ºORDER BYçš„ä¼˜å…ˆçº§åœ¨UNIONä¹‹åï¼Œ</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ„Ÿè§‰æœ¬è´¨ä¸Šå¯ä»¥å°†æŸ¥è¯¢è¯­å¥çš„ä»»ä½•ä¸€æ­¥å’Œä»»ä½•ä¸€ä¸ªå±‚æ¬¡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>æ¨ªçºµç­›é€‰ <code>SELECT â€¦â€¦``WHERE â€¦â€¦</code></li>
<li>é€‰è¡¨ <code>FROM â€¦â€¦</code></li>
<li>æ¨ªçºµè¿æ¥ <code>â€¦â€¦ JOIN â€¦â€¦``â€¦â€¦ UNION â€¦â€¦</code></li>
<li>æ’åºã€é™åˆ¶<code>ORDER BY â€¦â€¦``LIMIT â€¦â€¦</code></li>
</ol>
<p>éƒ½çœ‹ä½œæš‚æ—¶ç”Ÿæˆäº†ä¸€å¼ æ–°è¡¨ï¼ˆè™šæ‹Ÿè¡¨ï¼‰ï¼Œå°†åç»­æ­¥éª¤éƒ½çœ‹ä½œæ˜¯åœ¨å¯¹è¿™äº›æ–°è¡¨è¿›è¡Œè¿›ä¸€æ­¥çš„æ“ä½œï¼Œ è¿™æ ·ï¼Œå±‚æ¬¡æ­¥éª¤å°±èƒ½ç†æ¸…ï¼Œå°±å¥½ç†è§£äº†ï¼Œä¹Ÿæ‰çœŸçš„èƒ½ä»æœ¬è´¨ä¸ŠæŒæ¡å¹¶çµæ´»è¿ç”¨</p>
<h2 id="ã€ç¬¬å››ç« ã€‘æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a href="#ã€ç¬¬å››ç« ã€‘æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®" class="headerlink" title="ã€ç¬¬å››ç« ã€‘æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a>ã€ç¬¬å››ç« ã€‘æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®</h2><h3 id="1-åˆ—å±æ€§"><a href="#1-åˆ—å±æ€§" class="headerlink" title="1. åˆ—å±æ€§"></a>1. åˆ—å±æ€§</h3><p>ç‚¹å‡»è¡¨çš„æ‰³æ‰‹æŒ‰é’®ï¼šæ‰“å¼€è®¾è®¡æ¨¡å¼ï¼Œä»‹ç»äº†ä¸€äº›è¡¨ä¸­å­—æ®µ&#x2F;åˆ—çš„å±æ€§ã€‚</p>
<p><img src="/2023/11/05/sql-mosh/image-20231026170906220.png" srcset="/img/loading.gif" lazyload alt="image-20231026170906220"></p>
<ul>
<li>Datatypeï¼šæ•°æ®ç±»å‹ int æ•´æ•°å‹ varchar å¯å˜å­—ç¬¦</li>
<li>PKï¼šä¸»é”®</li>
<li>NNï¼šéç©ºå€¼ï¼ˆå†³å®šè¯¥åˆ—æ˜¯å¦å¯ä»¥å†™ç©ºå€¼ âˆšå¦ï¼‰</li>
<li>AIï¼šè‡ªåŠ¨é€’å¢ï¼ˆé€šå¸¸è¢«ç”¨åœ¨ä¸»é”®åˆ—ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨è¡¨ä¸­æ’å…¥ä¸€æ¡æ–°çºªå½•ï¼Œæˆ‘ä»¬è®©MySQLåœ¨åˆ—ä¸­æ’å…¥ä¸€ä¸ªå€¼ï¼ŒåŒæ—¶ä¸»é”®åˆ—åŠ ä¸€ï¼‰</li>
<li>Defaultï¼šé»˜è®¤å€¼</li>
</ul>
<h3 id="2-æ’å…¥å•è¡Œ"><a href="#2-æ’å…¥å•è¡Œ" class="headerlink" title="2. æ’å…¥å•è¡Œ"></a>2. æ’å…¥å•è¡Œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> ç›®æ ‡è¡¨ï¼ˆç›®æ ‡åˆ—ï¼Œå¯é€‰ï¼Œé€—å·éš”å¼€ï¼‰<br><span class="hljs-keyword">VALUES</span>ï¼ˆç›®æ ‡å€¼ï¼Œé€—å·éš”å¼€ï¼‰<br></code></pre></td></tr></table></figure>

<p>æ³•1. è‹¥ä¸æŒ‡æ˜åˆ—åï¼Œåˆ™æ’å…¥çš„å€¼å¿…é¡»æŒ‰æ‰€æœ‰å­—æ®µçš„é¡ºåºå®Œæ•´æ’å…¥</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customers <span class="hljs-comment">-- ç›®æ ‡è¡¨</span><br><span class="hljs-keyword">VALUES</span> (<br>    <span class="hljs-keyword">DEFAULT</span>,<br>    <span class="hljs-string">&#x27;Michael&#x27;</span>,<br>    <span class="hljs-string">&#x27;Jackson&#x27;</span>,<br>    <span class="hljs-string">&#x27;1958-08-29&#x27;</span>,  <span class="hljs-comment">-- DEFAULT/NULL/&#x27;1958-08-29&#x27;</span><br>    <span class="hljs-keyword">DEFAULT</span>,<br>    <span class="hljs-string">&#x27;5225 Figueroa Mountain Rd&#x27;</span>, <br>    <span class="hljs-string">&#x27;Los Olivos&#x27;</span>,<br>    <span class="hljs-string">&#x27;CA&#x27;</span>,<br>    <span class="hljs-keyword">DEFAULT</span><br>    );<br></code></pre></td></tr></table></figure>

<p>æ³•2. æŒ‡æ˜åˆ—åï¼Œå¯è·³è¿‡å–é»˜è®¤å€¼çš„åˆ—ä¸”å¯æ›´æ”¹é¡ºåºï¼Œä¸€èˆ¬ç”¨è¿™ç§ï¼Œæ›´æ¸…æ™°</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customers (<br>    address,<br>    city,<br>    state,<br>    last_name,<br>    first_name,<br>    birth_date,<br>    )<br><span class="hljs-keyword">VALUES</span> (<br>    <span class="hljs-string">&#x27;5225 Figueroa Mountain Rd&#x27;</span>,<br>    <span class="hljs-string">&#x27;Los Olivos&#x27;</span>,<br>    <span class="hljs-string">&#x27;CA&#x27;</span>,<br>    <span class="hljs-string">&#x27;Jackson&#x27;</span>,<br>    <span class="hljs-string">&#x27;Michael&#x27;</span>,    <br>    <span class="hljs-string">&#x27;1958-08-29&#x27;</span>,  <br>    )<br>```<br></code></pre></td></tr></table></figure>

<h3 id="3-æ’å…¥å¤šè¡Œ"><a href="#3-æ’å…¥å¤šè¡Œ" class="headerlink" title="3. æ’å…¥å¤šè¡Œ"></a>3. æ’å…¥å¤šè¡Œ</h3><p><code>VALUES â€¦â€¦</code> é‡Œä¸€è¡Œå†…æ•°æ®ç”¨<strong>æ‹¬å·å†…é€—å·</strong>éš”å¼€ï¼Œè€Œå¤šè¡Œæ•°æ®ç”¨<strong>æ‹¬å·é—´é€—å·</strong>éš”å¼€</p>
<ul>
<li>æ’å…¥å¤šæ¡è¿è´§å•†ä¿¡æ¯</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> shippers (name)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;shipper1&#x27;</span>),<br>       (<span class="hljs-string">&#x27;shipper2&#x27;</span>),<br>       (<span class="hljs-string">&#x27;shipper3&#x27;</span>);<br></code></pre></td></tr></table></figure>

<ul>
<li>æ’å…¥å¤šæ¡äº§å“ä¿¡æ¯</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br>#way1<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products <br><span class="hljs-keyword">VALUES</span> (<span class="hljs-keyword">DEFAULT</span>, <span class="hljs-string">&#x27;product1&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>),<br>       (<span class="hljs-keyword">DEFAULT</span>, <span class="hljs-string">&#x27;product2&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">20</span>),<br>       (<span class="hljs-keyword">DEFAULT</span>, <span class="hljs-string">&#x27;product3&#x27;</span>, <span class="hljs-number">3</span>, <span class="hljs-number">30</span>)<br># way2<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products(name, quantity_in_stock, unit_price)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;product1&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">10</span>),<br>	  (<span class="hljs-string">&#x27;product2&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">20</span>),<br>      (<span class="hljs-string">&#x27;product3&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;30&#x27;</span>)<br>      <br></code></pre></td></tr></table></figure>

<h3 id="4-æ’å…¥åˆ†çº§è¡Œ"><a href="#4-æ’å…¥åˆ†çº§è¡Œ" class="headerlink" title="4. æ’å…¥åˆ†çº§è¡Œ"></a>4. æ’å…¥åˆ†çº§è¡Œ</h3><p>è®¢å•è¡¨ï¼ˆordersè¡¨ï¼‰é‡Œçš„ä¸€æ¡è®°å½•å¯¹åº”è®¢å•é¡¹ç›®è¡¨ï¼ˆorder_itemsè¡¨ï¼‰é‡Œçš„å¤šæ¡è®°å½•ï¼Œä¸€å¯¹å¤šï¼Œæ˜¯ç›¸äº’å…³è”çš„çˆ¶å­è¡¨ã€‚é€šè¿‡æ·»åŠ &#x3D;&#x3D;ä¸€æ¡&#x3D;&#x3D;è®¢å•è®°å½•å’Œå¯¹åº”çš„&#x3D;&#x3D;å¤šæ¡&#x3D;&#x3D;è®¢å•é¡¹ç›®è®°å½•ï¼Œå­¦ä¹ å¦‚ä½•å‘çˆ¶å­è¡¨æ’å…¥åˆ†çº§ï¼ˆå±‚ï¼‰&#x2F;è€¦åˆæ•°æ®ï¼ˆinsert hierarchical dataï¼‰ï¼š</p>
<ul>
<li><p>å…³é”®ï¼šåœ¨æ’å…¥å­è¡¨è®°å½•æ—¶ï¼Œéœ€è¦ç”¨å†…å»ºå‡½æ•° <code>LAST_INSERT_ID()</code> è·å–ç›¸å…³çˆ¶è¡¨è®°å½•çš„è‡ªå¢IDï¼ˆè¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯ order_id)</p>
<blockquote>
<p>å†…å»ºå‡½æ•°ï¼šMySQLé‡Œæœ‰å¾ˆå¤šå¯ç”¨çš„å†…ç½®å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¯å¤ç”¨çš„ä»£ç å—ï¼Œå„æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œæ³¨æ„å‡½æ•°åçš„å•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥</p>
<p><code>LAST_INSERT_ID()</code>ï¼šè·å–æœ€æ–°çš„æˆåŠŸçš„ <code>INSERT è¯­å¥</code> ä¸­çš„è‡ªå¢idï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯çˆ¶è¡¨é‡Œæ–°å¢çš„ order_id.</p>
</blockquote>
</li>
</ul>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>æ–°å¢ä¸€ä¸ªè®¢å•ï¼ˆorderï¼‰ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªè®¢å•é¡¹ç›®&#x2F;ä¸¤ç§å•†å“ï¼ˆorder_itemsï¼‰ï¼Œè¯·åŒæ—¶æ›´æ–°è®¢å•è¡¨å’Œè®¢å•é¡¹ç›®è¡¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (customer_id, order_date, status)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2019-01-01&#x27;</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- å¯ä»¥å…ˆè¯•ä¸€ä¸‹ç”¨ SELECT last_insert_id() çœ‹èƒ½å¦æˆåŠŸè·å–åˆ°çš„æœ€æ–°çš„ order_id</span><br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> order_items  <span class="hljs-comment">-- å…¨æ˜¯å¿…é¡»å­—æ®µï¼Œå°±ä¸ç”¨æŒ‡å®šäº†</span><br><span class="hljs-keyword">VALUES</span> <br>    (last_insert_id(), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2.5</span>),<br>    (last_insert_id(), <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1.5</span>)<br></code></pre></td></tr></table></figure>



<h3 id="5-åˆ›å»ºè¡¨çš„å‰¯æœ¬"><a href="#5-åˆ›å»ºè¡¨çš„å‰¯æœ¬" class="headerlink" title="5. åˆ›å»ºè¡¨çš„å‰¯æœ¬"></a>5. åˆ›å»ºè¡¨çš„å‰¯æœ¬</h3><p>CREAT TABLE æ–°è¡¨å AS å­æŸ¥è¯¢</p>
<p><code>ä¸»é”®ä¸ä¼šå¤åˆ¶</code></p>
<p><strong>æ¡ˆä¾‹1</strong></p>
<p>è¿ç”¨ <code>CREAT TABLE æ–°è¡¨å AS å­æŸ¥è¯¢</code> å¿«é€Ÿåˆ›å»ºè¡¨ orders çš„å‰¯æœ¬è¡¨ orders_archived</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_archived <span class="hljs-keyword">AS</span><br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders  <span class="hljs-comment">-- å­æŸ¥è¯¢</span><br></code></pre></td></tr></table></figure>

<p><code>SELECT * FROM orders</code> é€‰æ‹©äº† oders ä¸­æ‰€æœ‰æ•°æ®ï¼Œä½œä¸ºASçš„å†…å®¹ï¼Œæ˜¯ä¸€ä¸ªå­æŸ¥è¯¢</p>
<ul>
<li>å­æŸ¥è¯¢ï¼š ä»»ä½•ä¸€ä¸ªå……å½“å¦ä¸€ä¸ªSQLè¯­å¥çš„ä¸€éƒ¨åˆ†çš„ <code>SELECTâ€¦â€¦</code> æŸ¥è¯¢è¯­å¥éƒ½æ˜¯å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŠ€å·§</li>
</ul>
<p><strong>æ¡ˆä¾‹2</strong></p>
<p>ä¸å†ç”¨å…¨éƒ¨æ•°æ®ï¼Œè€Œé€‰ç”¨åŸè¡¨ä¸­éƒ¨åˆ†æ•°æ®åˆ›å»ºå‰¯æœ¬è¡¨ï¼Œå¦‚ä»Šå¹´ä»¥å‰çš„ordersåˆ›å»ºä¸€ä¸ªå‰¯æœ¬orders_archivedï¼Œå…¶å®å°±æ˜¯åœ¨å­æŸ¥è¯¢ä¸­å¢åŠ äº†ä¸€ä¸ªwhereè¯­å¥è¿›è¡Œç­›é€‰ã€‚&#96;æ³¨æ„è¦å…ˆdropåˆ æ‰æˆ–truncateæ¸…ç©ºæ‰ä¹‹å‰çš„orders_archiveè¡¨å†é‡å»ºæˆ–é‡æ–°æ’å…¥æ•°æ®ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> orders_archived;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_archived <span class="hljs-keyword">AS</span><br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders  <span class="hljs-comment">-- å­æŸ¥è¯¢</span><br>    <span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">&lt;</span> <span class="hljs-string">&#x27;2019-01-01&#x27;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>åˆ›å»ºä¸€ä¸ªå­˜æ¡£å‘ç¥¨è¡¨ï¼ŒåªåŒ…å«æœ‰è¿‡æ”¯ä»˜è®°å½•çš„å‘ç¥¨å¹¶å°†é¡¾å®¢idæ¢æˆé¡¾å®¢åå­—</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs SQL">USE sql_invoicing;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> invoices_archived <span class="hljs-keyword">AS</span><br>	<span class="hljs-keyword">SELECT</span> i.invoice_id, c.name <span class="hljs-keyword">AS</span> client, i.payment_date<br>	<span class="hljs-keyword">FROM</span> invoices i<br>	<span class="hljs-keyword">JOIN</span> clients c<br>		<span class="hljs-keyword">USING</span> (client_id)<br>	<span class="hljs-keyword">WHERE</span> i.payment_date <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br></code></pre></td></tr></table></figure>



<h3 id="6-æ›´æ–°å•è¡Œ"><a href="#6-æ›´æ–°å•è¡Œ" class="headerlink" title="6. æ›´æ–°å•è¡Œ"></a>6. æ›´æ–°å•è¡Œ</h3><p>ç”¨ <code>UPDATE â€¦â€¦</code> è¯­å¥ æ¥ä¿®æ”¹è¡¨ä¸­çš„ä¸€æ¡æˆ–å¤šæ¡è®°å½•ï¼Œå…·ä½“è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> è¡¨ <br><span class="hljs-keyword">SET</span> è¦ä¿®æ”¹çš„å­—æ®µ <span class="hljs-operator">=</span> å…·ä½“å€¼<span class="hljs-operator">/</span><span class="hljs-keyword">NULL</span><span class="hljs-operator">/</span><span class="hljs-keyword">DEFAULT</span><span class="hljs-operator">/</span>åˆ—é—´æ•°å­¦è¡¨è¾¾å¼ ï¼ˆä¿®æ”¹å¤šä¸ªå­—æ®µç”¨é€—å·åˆ†éš”ï¼‰<br><span class="hljs-keyword">WHERE</span> è¡Œç­›é€‰<br></code></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">UPDATE</span> invoices<br><span class="hljs-keyword">SET</span> <br>    payment_total <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-operator">/</span> <span class="hljs-number">0</span> <span class="hljs-operator">/</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-operator">/</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">/</span> <span class="hljs-number">0.5</span> <span class="hljs-operator">*</span> invoice_total, <br>    <span class="hljs-comment">/*æ³¨æ„ 0.5 * invoice_total çš„ç»“æœå°æ•°éƒ¨åˆ†ä¼šè¢«èˆå¼ƒï¼Œ</span><br><span class="hljs-comment">    ä¹‹åè®²æ•°æ®ç±»å‹ä¼šè®²åˆ°è¿™ä¸ªé—®é¢˜*/</span><br>    payment_date <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2019-01-01&#x27;</span> <span class="hljs-operator">/</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-operator">/</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">/</span> due_date<br><span class="hljs-keyword">WHERE</span> invoice_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<h3 id="7-æ›´æ–°å¤šè¡Œ"><a href="#7-æ›´æ–°å¤šè¡Œ" class="headerlink" title="7. æ›´æ–°å¤šè¡Œ"></a>7. æ›´æ–°å¤šè¡Œ</h3><p>è¯­æ³•ä¸€æ ·çš„ï¼Œå°±æ˜¯è®© <code>WHEREâ€¦â€¦</code> çš„æ¡ä»¶åŒ…å«æ›´å¤šè®°å½•ï¼Œå°±ä¼šåŒæ—¶æ›´æ”¹å¤šæ¡è®°å½•äº†</p>
<p><strong>æ³¨æ„</strong></p>
<p>Workbenché»˜è®¤å¼€å¯äº†Safe UpdatesåŠŸèƒ½ï¼Œä¸å…è®¸åŒæ—¶æ›´æ”¹å¤šæ¡è®°å½•ï¼Œè¦å…ˆå…³é—­è¯¥åŠŸèƒ½ï¼ˆåœ¨ Edit-Preferences-SQL Editor-Safe Updatesï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">UPDATE</span> invoices<br><span class="hljs-keyword">SET</span> payment_total <span class="hljs-operator">=</span> <span class="hljs-number">233</span>, payment_date <span class="hljs-operator">=</span> due_date<br><span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>  <br><span class="hljs-comment">-- è¯¥å®¢æˆ·çš„å‘ç¥¨è®°å½•ä¸æ­¢ä¸€æ¡ï¼Œå°†åŒæ—¶æ›´æ”¹</span><br><span class="hljs-operator">/</span><span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) <br><span class="hljs-comment">-- ç¬¬äºŒç«  4~9 è®²çš„é‚£äº›å†™ WHERE æ¡ä»¶çš„æ–¹æ³•å‡å¯ç”¨</span><br><span class="hljs-comment">-- ç”šè‡³å¯ä»¥ç›´æ¥çœç•¥ WHERE è¯­å¥ï¼Œä¼šç›´æ¥æ›´æ”¹æ•´ä¸ªè¡¨çš„å…¨éƒ¨è®°å½•</span><br></code></pre></td></tr></table></figure>

<h3 id="8-åœ¨updatesä¸­ç”¨å­æŸ¥è¯¢"><a href="#8-åœ¨updatesä¸­ç”¨å­æŸ¥è¯¢" class="headerlink" title="8. åœ¨updatesä¸­ç”¨å­æŸ¥è¯¢"></a>8. åœ¨updatesä¸­ç”¨å­æŸ¥è¯¢</h3><p>æœ¬è´¨ä¸Šæ˜¯å°†å­æŸ¥è¯¢ç”¨åœ¨<code>where</code>è¡Œç­›é€‰æ¡ä»¶ä¸­</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>æ›´æ”¹å‘ç¥¨è®°å½•è¡¨ä¸­åå­—å« Yadel çš„è®°å½•ï¼Œä½†è¯¥è¡¨åªæœ‰ client_idï¼Œæ•…å…ˆè¦ä»å¦ä¸€ä¸ªé¡¾å®¢è¡¨ä¸­æŸ¥è¯¢å« Yadel äººçš„ client_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">UPDATE</span> invoices<br><span class="hljs-keyword">SET</span> payment_total <span class="hljs-operator">=</span> <span class="hljs-number">233</span>, payment_date <span class="hljs-operator">=</span> due_date<br><span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> (<br>	<span class="hljs-keyword">SELECT</span> client_id<br>	<span class="hljs-keyword">FROM</span> clients <br>	<span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Myworks&#x27;</span>)<br>	  <span class="hljs-comment">-- æ”¾å…¥æ‹¬å·ï¼Œç¡®ä¿å…ˆæ‰§è¡Œ</span><br><br><span class="hljs-comment">-- è‹¥å­æŸ¥è¯¢è¿”å›å¤šä¸ªæ•°æ®ï¼ˆä¸€åˆ—å¤šæ¡æ•°æ®ï¼‰æ—¶å°±ä¸èƒ½ç”¨ç­‰å·è€Œè¦ç”¨ IN äº†ï¼š</span><br><span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">IN</span> <br>    (<span class="hljs-keyword">SELECT</span> client_id <br>    <span class="hljs-keyword">FROM</span> clients<br>    <span class="hljs-keyword">WHERE</span> state <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;CA&#x27;</span>, <span class="hljs-string">&#x27;NY&#x27;</span>))<br></code></pre></td></tr></table></figure>



<p>ç¡®ä¿WHEREè¡Œç­›é€‰æ¡ä»¶å‡†ç¡®å‡†ç¡®æ— è¯¯åï¼Œå†æ”¾åˆ°ä¿®æ”¹è¯­å¥åæ‰§è¡Œä¿®æ”¹ï¼š</p>
<h3 id="9-åˆ é™¤è¡Œ"><a href="#9-åˆ é™¤è¡Œ" class="headerlink" title="9. åˆ é™¤è¡Œ"></a>9. åˆ é™¤è¡Œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> è¡¨ <br><span class="hljs-keyword">WHERE</span> è¡Œç­›é€‰æ¡ä»¶<br>ï¼ˆå½“ç„¶ä¹Ÿå¯ç”¨å­æŸ¥è¯¢ï¼‰<br>ï¼ˆè‹¥çœç•¥ <span class="hljs-keyword">WHERE</span> æ¡ä»¶è¯­å¥ä¼šåˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•ï¼ˆå’Œ <span class="hljs-keyword">TRUNCATE</span> ç­‰æ•ˆï¼Ÿï¼‰ï¼‰<br></code></pre></td></tr></table></figure>

<h3 id="10-æ¢å¤æ•°æ®åº“"><a href="#10-æ¢å¤æ•°æ®åº“" class="headerlink" title="10. æ¢å¤æ•°æ®åº“"></a>10. æ¢å¤æ•°æ®åº“</h3><p>Restoring the Databases (1:06)</p>
<p>å°±æ˜¯é‡æ–°è¿è¡Œé‚£ä¸ª create-databases.sql æ–‡ä»¶ä»¥é‡ç½®æ•°æ®åº“</p>
<h1 id="ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€è¿›é˜¶â€“æ±‡æ€»ã€å¤æ‚æŸ¥è¯¢ã€å†…ç½®å‡½æ•°"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€è¿›é˜¶â€“æ±‡æ€»ã€å¤æ‚æŸ¥è¯¢ã€å†…ç½®å‡½æ•°" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€è¿›é˜¶â€“æ±‡æ€»ã€å¤æ‚æŸ¥è¯¢ã€å†…ç½®å‡½æ•°"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€è¿›é˜¶â€“æ±‡æ€»ã€å¤æ‚æŸ¥è¯¢ã€å†…ç½®å‡½æ•°</h1><h2 id="ã€ç¬¬äº”ç« ã€‘æ±‡æ€»æ•°æ®"><a href="#ã€ç¬¬äº”ç« ã€‘æ±‡æ€»æ•°æ®" class="headerlink" title="ã€ç¬¬äº”ç« ã€‘æ±‡æ€»æ•°æ®"></a>ã€ç¬¬äº”ç« ã€‘æ±‡æ€»æ•°æ®</h2><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><p>èšåˆå‡½æ•°ï¼š<strong>è¾“å…¥ä¸€ç³»åˆ—å€¼å¹¶èšåˆä¸ºä¸€ä¸ªç»“æœ</strong>çš„å‡½æ•°</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    <span class="hljs-built_in">MAX</span>(invoice_date) <span class="hljs-keyword">AS</span> latest_date,  <br>    <span class="hljs-comment">-- SELECTé€‰æ‹©çš„ä¸ä»…å¯ä»¥æ˜¯åˆ—ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€åˆ—é—´è¡¨è¾¾å¼ã€åˆ—çš„èšåˆå‡½æ•°</span><br>    <span class="hljs-built_in">MIN</span>(invoice_total) lowest,<br>    <span class="hljs-built_in">AVG</span>(invoice_total) average,<br>    <span class="hljs-built_in">SUM</span>(invoice_total <span class="hljs-operator">*</span> <span class="hljs-number">1.1</span>) total,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) total_records,<br>    <span class="hljs-built_in">COUNT</span>(invoice_total) number_of_invoices, <br>    <span class="hljs-comment">-- å’Œä¸Šä¸€ä¸ªç›¸ç­‰</span><br>    <span class="hljs-built_in">COUNT</span>(payment_date) number_of_payments,  <br>    <span class="hljs-comment">-- ã€èšåˆå‡½æ•°ä¼šå¿½ç•¥ç©ºå€¼ã€‘ï¼Œå¾—åˆ°çš„æ”¯ä»˜æ•°å°‘äºå‘ç¥¨æ•°</span><br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> client_id) number_of_distinct_clients<br>    <span class="hljs-comment">-- DISTINCT client_id ç­›æ‰äº†è¯¥åˆ—çš„é‡å¤å€¼ï¼Œå†COUNTè®¡æ•°ï¼Œä¼šå¾—åˆ°ä¸åŒé¡¾å®¢æ•°</span><br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">WHERE</span> invoice_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;2019-07-01&#x27;</span>  <span class="hljs-comment">-- æƒ³åªç»Ÿè®¡ä¸‹åŠå¹´çš„ç»“æœ</span><br></code></pre></td></tr></table></figure>



<h3 id="GROUP-BY-å­å¥"><a href="#GROUP-BY-å­å¥" class="headerlink" title="GROUP BY å­å¥"></a>GROUP BY å­å¥</h3><p>æŒ‰ä¸€åˆ—æˆ–å¤šåˆ—åˆ†ç»„ï¼Œæ³¨æ„è¯­å¥çš„ä½ç½®ã€‚</p>
<ul>
<li>æ¡ˆä¾‹1ï¼šæŒ‰ä¸€ä¸ªå­—æ®µåˆ†ç»„</li>
</ul>
<p>åœ¨å‘ç¥¨è®°å½•è¡¨ä¸­<strong>æŒ‰ä¸åŒé¡¾å®¢åˆ†ç»„ç»Ÿè®¡</strong>ä¸‹åŠå¹´æ€»é”€å”®é¢å¹¶é™åºæ’åˆ—</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,  #åªæœ‰èšåˆå‡½æ•°æ˜¯æŒ‰ client_id åˆ†ç»„æ—¶ï¼Œè¿™é‡Œé€‰æ‹© client_id åˆ—æ‰æœ‰æ„ä¹‰ï¼ˆåˆ†ç»„ç»Ÿè®¡è¯­å¥é‡Œ<span class="hljs-keyword">SELECT</span>é€šå¸¸éƒ½æ˜¯é€‰æ‹©åˆ†ç»„ä¾æ®åˆ—<span class="hljs-operator">+</span>ç›®æ ‡ç»Ÿè®¡åˆ—çš„èšåˆå‡½æ•°ï¼Œé€‰åˆ«çš„åˆ—æ²¡æ„ä¹‰ï¼‰<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">WHERE</span> invoice_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">&#x27;2019-07-01&#x27;</span>  <span class="hljs-comment">-- ç­›é€‰ï¼Œè¿‡æ»¤å™¨</span><br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id  <span class="hljs-comment">-- åˆ†ç»„</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> invoice_total <span class="hljs-keyword">DESC</span><br><br></code></pre></td></tr></table></figure>

<p><code>selectâ€”fromâ€”whereâ€”group byâ€”order by</code></p>
<ul>
<li>æ¡ˆä¾‹2ï¼šæŒ‰å¤šä¸ªå­—æ®µåˆ†ç»„</li>
</ul>
<p>ç®—<strong>å„å·å„åŸå¸‚</strong>çš„æ€»é”€å”®é¢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>	state,<br>	city, <br>	<span class="hljs-built_in">SUM</span>(invoce_total) <span class="hljs-keyword">AS</span> total_sales<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">JOIN</span> clients <span class="hljs-keyword">USING</span>(client_id)<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> state,city<br></code></pre></td></tr></table></figure>

<h3 id="HAVING-å­å¥"><a href="#HAVING-å­å¥" class="headerlink" title="HAVING å­å¥"></a>HAVING å­å¥</h3><p>HAVING å’Œ WHERE éƒ½æ˜¯æ¡ä»¶ç­›é€‰è¯­å¥ï¼Œæ¡ä»¶çš„å†™æ³•ç›¸é€šï¼Œæ•°å­¦ã€æ¯”è¾ƒï¼ˆåŒ…æ‹¬ç‰¹æ®Šæ¯”è¾ƒï¼‰ã€é€»è¾‘è¿ç®—éƒ½å¯ä»¥ç”¨ï¼ˆå¦‚ ANDã€REGEXP ç­‰ç­‰ï¼‰</p>
<p>åŒºåˆ«</p>
<ul>
<li>whereæ˜¯å¯¹fromâ€¦joinâ€¦é‡ŒåŸè¡¨ä¸­çš„åˆ—è¿›è¡Œäº‹å‰ç­›é€‰ï¼Œæ‰€ä»¥WHEREå¯ä»¥å¯¹æ²¡é€‰æ‹©çš„åˆ—è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥å¿…é¡»ç”¨åŸè¡¨åˆ—åè€Œä¸èƒ½ç”¨selectç¡®å®šçš„åˆ—åˆ«åã€‚</li>
<li>è€Œhavingâ€¦å¯¹selectâ€¦æŸ¥è¯¢åï¼ˆé€šå¸¸æ˜¯åˆ†ç»„å¹¶èšåˆæŸ¥è¯¢åï¼‰çš„ç»“æœåˆ—è¿›è¡Œç­›é€‰ï¼Œè‹¥SELECTé‡Œèµ·äº†åˆ«åçš„å­—æ®µåˆ™å¿…é¡»ç”¨åˆ«åè¿›è¡Œç­›é€‰ï¼Œä¸”ä¸èƒ½å¯¹SELECTé‡Œæœªé€‰æ‹©çš„å­—æ®µè¿›è¡Œç­›é€‰ã€‚</li>
</ul>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>ç­›é€‰å‡ºæ€»å‘ç¥¨é‡‘é¢å¤§äº500ä¸”æ€»å‘ç¥¨æ•°é‡å¤§äº5çš„é¡¾å®¢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>



<p>ç»ƒä¹ </p>
<p>åœ¨ sql_store æ•°æ®åº“ï¼ˆæœ‰é¡¾å®¢è¡¨ã€è®¢å•è¡¨ã€è®¢å•é¡¹ç›®è¡¨ç­‰ï¼‰ä¸­ï¼Œæ‰¾å‡ºåœ¨ â€˜VAâ€™ å·ä¸”æ¶ˆè´¹æ€»é¢è¶…è¿‡100ç¾å…ƒçš„é¡¾å®¢ï¼ˆè¿™æ˜¯ä¸€ä¸ªé¢è¯•çº§çš„é—®é¢˜ï¼Œè¿˜å¾ˆå¸¸è§ï¼‰</p>
<p>æ€è·¯ï¼š</p>
<ol>
<li>éœ€è¦çš„ä¿¡æ¯åœ¨é¡¾å®¢è¡¨ã€è®¢å•è¡¨ã€è®¢å•é¡¹ç›®è¡¨ä¸‰å¼ è¡¨ä¸­ï¼Œå…ˆå°†ä¸‰å¼ è¡¨åˆå¹¶</li>
<li>WHERE äº‹å‰ç­›é€‰ â€˜VAâ€™ å·çš„</li>
<li>æŒ‰é¡¾å®¢åˆ†ç»„ï¼Œå¹¶é€‰å–æ‰€éœ€çš„åˆ—å¹¶èšåˆå¾—åˆ°æ¯ä½é¡¾å®¢çš„ä»˜æ¬¾æ€»é¢</li>
<li>HAVING äº‹åç­›é€‰è¶…è¿‡ 100ç¾å…ƒ çš„</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span><br>	customer_id,<br>	c.first_name,<br>	c.last_name,<br>	<span class="hljs-built_in">SUM</span>(oi.quantity <span class="hljs-operator">*</span> oi.unit_price) <span class="hljs-keyword">AS</span> total_sales<br><span class="hljs-keyword">FROM</span> customers c<br><span class="hljs-keyword">JOIN</span> orders o <span class="hljs-keyword">USING</span>(customer_id)<br><span class="hljs-keyword">JOIN</span> order_items oi <span class="hljs-keyword">USING</span>(order_id)<br><span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;VA&#x27;</span><br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <br>	customer_id,<br>	c.first_name,<br>	c.last_name<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span><br></code></pre></td></tr></table></figure>



<h3 id="ROLLUPè¿ç®—ç¬¦"><a href="#ROLLUPè¿ç®—ç¬¦" class="headerlink" title="ROLLUPè¿ç®—ç¬¦"></a>ROLLUPè¿ç®—ç¬¦</h3><p><code>group by... with roll up</code> è‡ªåŠ¨æ±‡æ€»å‹åˆ†ç»„ï¼Œè‹¥æ˜¯å¤šå­—æ®µåˆ†ç»„æ±‡æ€»ä¹Ÿæ˜¯<u>å¤šå±‚æ¬¡</u>çš„ã€‚</p>
<p>ä¾‹1ï¼šåˆ†ç»„æŸ¥è¯¢å„å·ã€å¸‚çš„æ€»é”€å”®é¢ï¼ˆå‘ç¥¨æ€»é¢ï¼‰ä»¥åŠå·å±‚æ¬¡å’Œå…¨å›½å±‚æ¬¡çš„ä¸¤ä¸ªå±‚æ¬¡çš„æ±‡æ€»é¢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    state,<br>    city,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">JOIN</span> clients <span class="hljs-keyword">USING</span> (client_id) <br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> state, city <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span><br></code></pre></td></tr></table></figure>

<p>ä¾‹2ï¼šåˆ†ç»„è®¡ç®—å„ä¸ªä»˜æ¬¾æ–¹å¼çš„æ€»ä»˜æ¬¾å¹¶æ±‡æ€»</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>	pm.name <span class="hljs-keyword">AS</span> payment_method,<br>    <span class="hljs-built_in">SUM</span>(amount) <span class="hljs-keyword">AS</span> total<br><span class="hljs-keyword">FROM</span> payments p<br><span class="hljs-keyword">JOIN</span> payment_methods pm<br>	<span class="hljs-keyword">ON</span> pm.payment_method_id <span class="hljs-operator">=</span> p.payment_id<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> pm.name <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span><br></code></pre></td></tr></table></figure>

<p><strong>â˜…æ€»ç»“</strong></p>
<p>æ ¹æ®ä¹‹åä¸‰ç¯‡å‚è€ƒæ–‡ç« ï¼Œæ®è¯´æ ‡å‡†çš„ SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p>
<ol>
<li>FROM JOIN é€‰æ‹©å’Œè¿æ¥æœ¬æ¬¡æŸ¥è¯¢æ‰€éœ€çš„è¡¨</li>
<li>ON&#x2F;USING WHERE æŒ‰æ¡ä»¶ç­›é€‰è¡Œ</li>
<li>GROUP BY åˆ†ç»„</li>
<li>SELECT ç­›é€‰åˆ—<br>  æ³¨æ„1ï¼šè‹¥è¿›è¡Œäº†åˆ†ç»„ï¼Œè¿™ä¸€æ­¥å¸¸å¸¸è¦èšåˆ<br>  æ³¨æ„2ï¼šSELECT å’Œ HAVING åœ¨ MySQL é‡Œçš„æ‰§è¡Œé¡ºåºæˆ‘è¿˜æœ‰ç‚¹ç–‘é—®ï¼Œè§åé¢çš„å™è¿°</li>
<li>HAVING ï¼ˆäº‹å&#x2F;åˆ†ç»„åï¼‰ç­›é€‰è¡Œ</li>
<li>DISTINCT å»é‡</li>
<li>UNION çºµå‘åˆå¹¶</li>
<li>ORDER BY æ’åº</li>
<li>LIMIT é™åˆ¶</li>
</ol>
<p>â€œSELECT æ˜¯åœ¨å¤§éƒ¨åˆ†è¯­å¥æ‰§è¡Œäº†ä¹‹åæ‰æ‰§è¡Œçš„ï¼Œä¸¥æ ¼çš„è¯´æ˜¯åœ¨ FROMã€WHERE å’Œ GROUP BY ä¹‹åæ‰§è¡Œçš„ã€‚ç†è§£è¿™ä¸€ç‚¹æ˜¯éå¸¸é‡è¦çš„ï¼Œ<strong>è¿™å°±æ˜¯ä½ ä¸èƒ½åœ¨ WHERE ä¸­ä½¿ç”¨åœ¨ SELECT ä¸­è®¾å®šåˆ«åçš„å­—æ®µä½œä¸ºåˆ¤æ–­æ¡ä»¶çš„åŸå› ã€‚</strong>â€œ</p>
<p>è€Œ HAVING å¿…é¡»ç”¨ SELECT é€‰ä¸­åˆ—ï¼ˆèšåˆå‡½æ•°é™¤å¤–ï¼‰</p>
<h2 id="ã€ç¬¬å…­ç« ã€‘ç¼–å†™å¤æ‚æŸ¥è¯¢"><a href="#ã€ç¬¬å…­ç« ã€‘ç¼–å†™å¤æ‚æŸ¥è¯¢" class="headerlink" title="ã€ç¬¬å…­ç« ã€‘ç¼–å†™å¤æ‚æŸ¥è¯¢"></a>ã€ç¬¬å…­ç« ã€‘ç¼–å†™å¤æ‚æŸ¥è¯¢</h2><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><p>å­æŸ¥è¯¢ï¼š ä»»ä½•ä¸€ä¸ªå……å½“å¦ä¸€ä¸ªSQLè¯­å¥çš„ä¸€éƒ¨åˆ†çš„ SELECTâ€¦â€¦ æŸ¥è¯¢è¯­å¥éƒ½æ˜¯å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŠ€å·§ã€‚å­æŸ¥è¯¢çš„å±‚çº§ç”¨æ‹¬å·å®ç°ã€‚</p>
<p>ä¾‹1ï¼šåœ¨ products ä¸­ï¼Œæ‰¾åˆ°æ‰€æœ‰æ¯”ç”Ÿèœï¼ˆid &#x3D; 3ï¼‰ä»·æ ¼é«˜çš„</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> unit_price <span class="hljs-operator">&gt;</span> (<br>	<span class="hljs-keyword">SELECT</span> unit_price<br>    <span class="hljs-keyword">FROM</span> products<br>    <span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>

<p>MySQLæ‰§è¡Œæ—¶ä¼šå…ˆæ‰§è¡Œæ‹¬å·å†…çš„å­æŸ¥è¯¢ï¼ˆå†…æŸ¥è¯¢ï¼‰ï¼Œå°†è·å¾—çš„ç”Ÿèœä»·æ ¼ä½œä¸ºç»“æœè¿”å›ç»™å¤–æŸ¥è¯¢</p>
<p>å­æŸ¥è¯¢ä¸ä»…å¯ç”¨åœ¨ WHERE â€¦â€¦ ä¸­ï¼Œä¹Ÿå¯ç”¨åœ¨ SELECT â€¦â€¦ æˆ– FROM â€¦â€¦ ç­‰å­å¥ä¸­ï¼Œæœ¬ç« åé¢ä¼šè®²</p>
<h3 id="INè¿ç®—ç¬¦"><a href="#INè¿ç®—ç¬¦" class="headerlink" title="INè¿ç®—ç¬¦"></a>INè¿ç®—ç¬¦</h3><p>åœ¨ sql_store åº“ products è¡¨ä¸­æ‰¾å‡ºé‚£äº›ä»æœªè¢«è®¢è´­è¿‡çš„äº§å“</p>
<p>æ€è·¯ï¼š</p>
<ul>
<li>order_items è¡¨é‡Œæœ‰æ‰€æœ‰äº§å“è¢«è®¢è´­çš„è®°å½•ï¼Œç”¨ DISTINCT å»é‡ï¼Œå¾—åˆ°æ‰€æœ‰è¢«è®¢è´­è¿‡çš„äº§å“åˆ—è¡¨</li>
<li>ä¸åœ¨è¿™åˆ—è¡¨é‡Œï¼ˆNOT IN çš„ä½¿ç”¨ï¼‰çš„äº§å“å³ä¸ºä»æœªè¢«è®¢è´­è¿‡çš„äº§å“</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> product_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> product_id<br>    <span class="hljs-keyword">FROM</span> order_items<br>)<br></code></pre></td></tr></table></figure>

<h3 id="4-å­æŸ¥è¯¢-vs-è¿æ¥"><a href="#4-å­æŸ¥è¯¢-vs-è¿æ¥" class="headerlink" title="4.å­æŸ¥è¯¢ vs è¿æ¥"></a>4.å­æŸ¥è¯¢ vs è¿æ¥</h3><p><strong>æ¡ˆä¾‹</strong></p>
<p>ä¸ŠèŠ‚è¯¾çš„æ¡ˆä¾‹ï¼Œæ‰¾å‡ºä»æœªè®¢è´­ï¼ˆæ²¡æœ‰invoicesï¼‰çš„é¡¾å®¢ï¼š</p>
<p>æ³•1. å­æŸ¥è¯¢</p>
<p>å…ˆç”¨å­æŸ¥è¯¢æŸ¥å‡ºæœ‰è¿‡å‘ç¥¨è®°å½•çš„é¡¾å®¢åå•ï¼Œä½œä¸ºç­›é€‰ä¾æ®</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> clients<br><span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> client_id<br>    <span class="hljs-comment">/*å…¶å®è¿™é‡ŒåŠ ä¸åŠ DISTINCTå¯¹å­æŸ¥è¯¢è¿”å›çš„ç»“æœæœ‰å½±å“</span><br><span class="hljs-comment">    ä½†å¯¹æœ€åçš„ç»“æœå…¶å®æ²¡æœ‰å½±å“*/</span><br>    <span class="hljs-keyword">FROM</span> invoices<br>)<br></code></pre></td></tr></table></figure>

<p>æ³•2. é“¾æ¥è¡¨</p>
<p>ç”¨é¡¾å®¢è¡¨ LEFT JOIN å‘ç¥¨è®°å½•è¡¨ï¼Œå†ç›´æ¥åœ¨è¿™ä¸ªåˆå¹¶è¯¦æƒ…è¡¨ä¸­ç­›é€‰å‡ºæ²¡æœ‰å‘ç¥¨è®°å½•çš„é¡¾å®¢</p>
<p><code>åªæœ‰åˆèµ·æ¥ï¼Œæˆ‘ä»¬æ‰çŸ¥é“é¡¾å®¢æœ‰æ²¡æœ‰å‘ç¥¨è®°å½•ï¼›åŒæ—¶å¦‚æœä½¿ç”¨å†…é“¾æ¥ï¼Œä¼šè‡ªåŠ¨æŠŠæ²¡æœ‰å‘ç¥¨è®°å½•çš„ç­›æ‰</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> client_id, name â€¦â€¦ <br><span class="hljs-comment">-- ä¸èƒ½SELECT DISTINCT *</span><br><span class="hljs-keyword">FROM</span> clients<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> invoices <span class="hljs-keyword">USING</span> (client_id)<br><span class="hljs-comment">-- æ³¨æ„ä¸èƒ½ç”¨å†…é“¾æ¥ï¼Œå¦åˆ™æ²¡æœ‰å‘ç¥¨è®°å½•çš„é¡¾å®¢ï¼ˆæˆ‘ä»¬çš„ç›®æ ‡ï¼‰ç›´æ¥å°±è¢«ç­›æ‰äº†</span><br><span class="hljs-keyword">WHERE</span> invoice_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span><br></code></pre></td></tr></table></figure>









<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> customer_id, first_name, last_name<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> customer_id <span class="hljs-keyword">IN</span> (<br>	<span class="hljs-keyword">SELECT</span> customer_id<br>	<span class="hljs-keyword">FROM</span> orders<br>	<span class="hljs-keyword">WHERE</span> order_id <span class="hljs-keyword">IN</span> (<br>		<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> order_id<br>		<span class="hljs-keyword">FROM</span> order_items<br>		<span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>		)<br>	)<br>	<br>	<span class="hljs-comment">------</span><br><span class="hljs-keyword">SELECT</span> customer_id, first_name, last_name<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> customer_id <span class="hljs-keyword">IN</span> (<br>	<span class="hljs-keyword">SELECT</span> customer_id<br>	<span class="hljs-keyword">FROM</span> orders<br>    <span class="hljs-keyword">JOIN</span> order_items <span class="hljs-keyword">USING</span>(order_id)<br>	<span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>		)<br>	<span class="hljs-comment">-------</span><br>USE sql_store;<br><span class="hljs-keyword">SELECT</span> customer_id, first_name, last_name<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> orders <span class="hljs-keyword">USING</span>(customer_id)<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> order_items <span class="hljs-keyword">USING</span>(order_id)	<br><span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>		<br>	<br></code></pre></td></tr></table></figure>



<h3 id="5-ALLå…³é”®è¯"><a href="#5-ALLå…³é”®è¯" class="headerlink" title="5. ALLå…³é”®è¯"></a>5. ALLå…³é”®è¯</h3><p><code>&gt; (MAX (â€¦â€¦))</code> å’Œ <code>&gt; ALL(â€¦â€¦)</code> ç­‰æ•ˆå¯äº’æ¢</p>
<p>â€œæ¯”è¿™é‡Œé¢æœ€å¤§çš„è¿˜å¤§â€ &#x3D; â€œæ¯”è¿™é‡Œé¢çš„æ‰€æœ‰çš„éƒ½å¤§â€</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>sql_invoicing åº“ä¸­ï¼Œé€‰å‡ºé‡‘é¢å¤§äº3å·é¡¾å®¢æ‰€æœ‰å‘ç¥¨é‡‘é¢ï¼ˆæˆ–3å·é¡¾å®¢æœ€å¤§å‘ç¥¨é‡‘é¢ï¼‰ çš„å‘ç¥¨</p>
<p>æ³•1. ç”¨MAXå…³é”®å­—</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> (<br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(invoice_total)<br>    <span class="hljs-keyword">FROM</span> invoices<br>    <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>)<br></code></pre></td></tr></table></figure>

<p>æ³•2. ç”¨ALLå…³é”®å­—</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ALL</span> (<br>    <span class="hljs-keyword">SELECT</span> invoice_total<br>    <span class="hljs-keyword">FROM</span> invoices<br>    <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>)<br></code></pre></td></tr></table></figure>

<p>å…¶å®å°±æ˜¯æŠŠå†…å±‚æ‹¬å·çš„MAXæ‹¿åˆ°äº†å¤–å±‚æ‹¬å·å˜æˆALLï¼š</p>
<h3 id="6-ANYå…³é”®è¯"><a href="#6-ANYå…³é”®è¯" class="headerlink" title="6.ANYå…³é”®è¯"></a>6.ANYå…³é”®è¯</h3><p><code>&gt; ANY/SOME(...)</code>ä¸<code>&gt; (MIN(...))</code>ç­‰æ•ˆ</p>
<p><code>=ANY/SOME(...)</code>ä¸<code>IN(...)</code>ç­‰æ•ˆ</p>
<h3 id="7-ç›¸å…³å­æŸ¥è¯¢"><a href="#7-ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="7. ç›¸å…³å­æŸ¥è¯¢"></a>7. ç›¸å…³å­æŸ¥è¯¢</h3><p><strong>æ¡ˆä¾‹</strong></p>
<p>é€‰å‡º sql_hr.employees é‡Œé‚£äº›å·¥èµ„è¶…è¿‡<strong>ä»–æ‰€åœ¨</strong>åŠå…¬å®¤å¹³å‡å·¥èµ„ï¼ˆè€Œä¸æ˜¯æ•´ä½“å¹³å‡å·¥èµ„ï¼‰çš„å‘˜å·¥<br>å…³é”®ï¼šå¦‚ä½•æŸ¥è¯¢ç›®å‰ä¸»æŸ¥è¯¢å‘˜å·¥çš„æ‰€åœ¨åŠå…¬å®¤çš„å¹³å‡å·¥èµ„è€Œä¸æ˜¯æ•´ä½“çš„å¹³å‡å·¥èµ„ï¼Ÿ<br>æ€è·¯ï¼šç»™ä¸»æŸ¥è¯¢ employeesè¡¨ è®¾ç½®åˆ«å eï¼Œè¿™æ ·åœ¨å­æŸ¥è¯¢æŸ¥è¯¢å¹³å‡å·¥èµ„æ—¶åŠ ä¸Š <code>WHERE office_id = e.office_id</code> ç­›é€‰æ¡ä»¶å³å¯ç›¸å…³è”åœ°æŸ¥è¯¢åˆ°ç›®å‰å‘˜å·¥æ‰€åœ¨åœ°åŠå…¬å®¤çš„å¹³å‡å·¥èµ„</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_hr;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> employees e  <span class="hljs-comment">-- å…³é”® 1</span><br><span class="hljs-keyword">WHERE</span> salary <span class="hljs-operator">&gt;</span> (<br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(salary)<br>    <span class="hljs-keyword">FROM</span> employees<br>    <span class="hljs-keyword">WHERE</span> office_id <span class="hljs-operator">=</span> e.office_id  <span class="hljs-comment">-- å…³é”® 2</span><br>    <span class="hljs-comment">-- ã€å­æŸ¥è¯¢è¡¨å­—æ®µä¸ç”¨åŠ å‰ç¼€ï¼Œä¸»æŸ¥è¯¢è¡¨çš„å­—æ®µè¦åŠ å‰ç¼€ï¼Œä»¥æ­¤åŒºåˆ†ã€‘</span><br>)<br></code></pre></td></tr></table></figure>

<p>ä¹‹å‰éƒ½æ˜¯éå…³è”ä¸»&#x2F;å­ï¼ˆå¤–&#x2F;å†…ï¼‰æŸ¥è¯¢ï¼Œæ¯”å¦‚å­æŸ¥è¯¢å…ˆæŸ¥å‡ºæ•´ä½“çš„æŸå¹³å‡å€¼æˆ–æ»¡è¶³æŸäº›æ¡ä»¶çš„ä¸€åˆ—idï¼Œä½œä¸ºä¸»æŸ¥è¯¢çš„ç­›é€‰ä¾æ®ï¼Œè¿™ç§å­æŸ¥è¯¢ä¸ä¸»æŸ¥è¯¢æ— å…³ï¼Œä¼šå…ˆä¸€æ¬¡æ€§å¾—å‡ºæŸ¥è¯¢ç»“æœå†è¿”å›ç»™ä¸»æŸ¥è¯¢ä¾›å…¶ä½¿ç”¨ã€‚</p>
<p>è€Œä¸‹é¢è¿™ç§ç›¸å…³è”å­æŸ¥è¯¢ä¾‹å­é‡Œï¼Œå­æŸ¥è¯¢è¦æŸ¥è¯¢çš„æ˜¯æŸå‘˜å·¥æ‰€åœ¨åŠå…¬å®¤çš„å¹³å‡å€¼ï¼Œå­æŸ¥è¯¢æ˜¯ä¾èµ–ä¸»æŸ¥è¯¢çš„ï¼Œ<strong>æ³¨æ„è¿™ç§å…³è”æŸ¥è¯¢æ˜¯åœ¨ä¸»æŸ¥è¯¢çš„æ¯ä¸€è¡Œ&#x2F;æ¯ä¸€æ¡è®°å½•å±‚é¢ä¸Šä¾æ¬¡è¿›è¡Œçš„</strong>ï¼Œè¿™ä¸€ç‚¹å¯ä»¥ä¸ºæˆ‘ä»¬å†™å…³è”å­æŸ¥è¯¢æä¾›çº¿ç´¢ï¼ˆæ³¨æ„è¡¨åˆ«åçš„ä½¿ç”¨ï¼‰ï¼Œå¦å¤–ä¹Ÿæ­£å› ä¸ºè¿™ä¸€ç‚¹ï¼Œç›¸å…³å­æŸ¥è¯¢ä¼šæ¯”éå…³è”æŸ¥è¯¢æ‰§è¡Œèµ·æ¥æ…¢ä¸€äº›ã€‚</p>
<h3 id="8-EXISTS-è¿ç®—ç¬¦"><a href="#8-EXISTS-è¿ç®—ç¬¦" class="headerlink" title="8.EXISTS è¿ç®—ç¬¦"></a>8.EXISTS è¿ç®—ç¬¦</h3><p><code>IN + å­æŸ¥è¯¢</code> ç­‰æ•ˆäº <code>EXIST + ç›¸å…³å­æŸ¥è¯¢</code>ï¼Œå¦‚æœå‰è€…å­æŸ¥è¯¢çš„ç»“æœé›†è¿‡å¤§å ç”¨å†…å­˜ï¼Œç”¨åè€…é€æ¡éªŒè¯æ›´æœ‰æ•ˆç‡ã€‚å¦å¤– EXIST() æœ¬è´¨ä¸Šæ˜¯æ ¹æ®æ˜¯å¦ä¸ºç©ºè¿”å› TRUE å’Œ FALSEï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åŠ  NOT å–åã€‚</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>æ‰¾å‡ºæœ‰è¿‡å‘ç¥¨è®°å½•çš„å®¢æˆ·</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>





<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>





<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>





<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    client_id,<br>    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,<br>    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<br><span class="hljs-keyword">FROM</span> invoices<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<br><span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-comment">-- å‡ä¸º SELECT é‡Œçš„åˆ—åˆ«å</span><br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># way1: å­æŸ¥è¯¢<br>USE sql_invoicing;<br>SELECT *<br>FROM client<br>WHERE client_id IN (<br>	SELECT DISTINCT client_id<br>	FROM invoices<br>)<br># way2ï¼šé“¾æ¥è¡¨<br>USE sql_invoicing;<br>SELECT DISTINCT client_id, name, ...<br>FROM clients<br>JOIN invoices USING(client_id)<br><br>#EXISTSè¿ç®—ç¬¦<br>USE sql_invoicing;<br><br>SELECT *<br>FROM clients c<br>WHERE EXISTS (<br>    SELECT */client_id  <br>    /* å°±è¿™ä¸ªå­æŸ¥è¯¢çš„ç›®çš„æ¥è¯´ï¼ŒSELECTçš„é€‰æ‹©ä¸å½±å“ç»“æœï¼Œ<br>    å› ä¸ºEXISTS()å‡½æ•°åªæ ¹æ®æ˜¯å¦ä¸ºç©ºè¿”å› TRUE å’Œ FALSE */<br>    FROM invoices<br>    WHERE client_id = c.client_id<br>)<br></code></pre></td></tr></table></figure>





<p>è¿™è¿˜æ˜¯ä¸ªç›¸å…³å­æŸ¥è¯¢ï¼Œå› ä¸ºåœ¨å…¶ä¸­å¼•ç”¨äº†ä¸»æŸ¥è¯¢çš„ clients è¡¨ã€‚è¿™åŒæ ·æ˜¯æŒ‰ç…§ä¸»æŸ¥è¯¢çš„è®°å½•ä¸€æ¡æ¡éªŒè¯æ‰§è¡Œçš„ã€‚å…·ä½“è¯´æ¥ï¼Œå¯¹äº clients è¡¨ï¼ˆè®¾ç½®åˆ«åä¸º cï¼‰é‡Œçš„æ¯ä¸€ä¸ªé¡¾å®¢ï¼Œå­æŸ¥è¯¢åœ¨ invoices è¡¨æŸ¥æ‰¾è¿™ä¸ªäººçš„å‘ç¥¨è®°å½•ï¼ˆ å³ client_id &#x3D; c.client_id çš„å‘ç¥¨è®°å½•ï¼‰ï¼Œæœ‰å°±è¿”å›ç›¸å…³è®°å½•å¦è€…è¿”å›ç©ºï¼Œç„¶å EXISTS() æ ¹æ®æ˜¯å¦ä¸ºç©ºå¾—åˆ° TRUE å’Œ FALSEï¼ˆè¡¨ç¤ºæ­¤äººæœ‰æ— å‘ç¥¨è®°å½•ï¼‰ï¼Œç„¶åä¸»æŸ¥è¯¢å‡­æ­¤ç¡®å®šæ˜¯å¦ä¿ç•™æ­¤æ¡è®°å½•ã€‚</p>
<h3 id="9-SELECTå­—å¥çš„å­æŸ¥è¯¢"><a href="#9-SELECTå­—å¥çš„å­æŸ¥è¯¢" class="headerlink" title="9. SELECTå­—å¥çš„å­æŸ¥è¯¢"></a>9. SELECTå­—å¥çš„å­æŸ¥è¯¢</h3><p>ä¸ä»… WHERE ç­›é€‰æ¡ä»¶é‡Œå¯ä»¥ç”¨å­æŸ¥è¯¢ï¼ŒSELECT é€‰æ‹©å­å¥å’Œ FROM æ¥æºè¡¨å­å¥ä¹Ÿèƒ½ç”¨å­æŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>    invoice_id,<br>    invoice_total,<br>    (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices) <span class="hljs-keyword">AS</span> invoice_average,<br>    <span class="hljs-comment">/*ä¸èƒ½ç›´æ¥ç”¨èšåˆå‡½æ•°ï¼Œå› ä¸ºâ€œæ¯”è¾ƒå¼ºåŠ¿â€ï¼Œä¼šå‹ç¼©èšåˆç»“æœä¸ºä¸€æ¡</span><br><span class="hljs-comment">    ç”¨æ‹¬å·+å­æŸ¥è¯¢(SELECT AVG(invoice_total) FROM invoices) </span><br><span class="hljs-comment">    å°†å…¶ä½œä¸ºä¸€ä¸ªæ•°å€¼ç»“æœ 152.388235 åŠ å…¥ä¸»æŸ¥è¯¢è¯­å¥*/</span><br>    invoice_total <span class="hljs-operator">-</span> (<span class="hljs-keyword">SELECT</span> invoice_average) <span class="hljs-keyword">AS</span> difference<br>    <span class="hljs-comment">/*SELECTè¡¨è¾¾å¼é‡Œè¦ç”¨åŸåˆ—åï¼Œä¸èƒ½ç›´æ¥ç”¨åˆ«åinvoice_average</span><br><span class="hljs-comment">    è¦ç”¨åˆ—åˆ«åçš„è¯ç”¨å­æŸ¥è¯¢ï¼ˆSELECT åŒçº§çš„åˆ—åˆ«åï¼‰å³å¯</span><br><span class="hljs-comment">    è¯´çœŸçš„ï¼Œæ„Ÿè§‰è¿™ä¸ªå­æŸ¥è¯¢æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œä½†è®°ä½ä¼šç”¨å°±è¡Œ*/</span><br><span class="hljs-keyword">FROM</span> invoices<br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>å¾—åˆ°ä¸€ä¸ªæœ‰å¦‚ä¸‹åˆ—çš„è¡¨æ ¼ï¼šclient_id, name, total_salesï¼ˆå„ä¸ªå®¢æˆ·çš„å‘ç¥¨æ€»é¢ï¼‰, averageï¼ˆæ€»å¹³å‡å‘ç¥¨é¢ï¼‰, differenceï¼ˆå‰ä¸¤ä¸ªå€¼çš„å·®ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <br>	client_id,<br>	name,<br>	(<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> c.client_id ) <span class="hljs-keyword">AS</span> total_sales,<br>	(<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices) <span class="hljs-keyword">AS</span> average,<br>	(<span class="hljs-keyword">SELECT</span> total_sales <span class="hljs-operator">-</span> average) <span class="hljs-keyword">AS</span> difference<br><span class="hljs-keyword">FROM</span> clients c<br>    <br><span class="hljs-keyword">FROM</span> client c<br></code></pre></td></tr></table></figure>





<h3 id="10-FROMå­—å¥çš„å­æŸ¥è¯¢"><a href="#10-FROMå­—å¥çš„å­æŸ¥è¯¢" class="headerlink" title="10. FROMå­—å¥çš„å­æŸ¥è¯¢"></a>10. FROMå­—å¥çš„å­æŸ¥è¯¢</h3><p>å­æŸ¥è¯¢çš„ç»“æœåŒæ ·å¯ä»¥å……å½“ä¸€ä¸ªâ€œè™šæ‹Ÿè¡¨â€ä½œä¸ºFROMè¯­å¥ä¸­çš„æ¥æºè¡¨ï¼Œå³å°†ç­›é€‰æŸ¥è¯¢ç»“æœä½œä¸ºæ¥æºå†è¿›è¡Œè¿›ä¸€æ­¥çš„ç­›é€‰æŸ¥è¯¢ã€‚ä½†æ³¨æ„åªæœ‰åœ¨å­æŸ¥è¯¢ä¸å¤ªå¤æ‚æ—¶è¿›è¡Œè¿™æ ·çš„åµŒå¥—ï¼Œå¦åˆ™æœ€å¥½ç”¨åé¢è®²çš„è§†å›¾å…ˆæŠŠå­æŸ¥è¯¢ç»“æœå‚¨å­˜èµ·æ¥å†ä½¿ç”¨ã€‚</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<p>å°†ä¸Šä¸€èŠ‚ç»ƒä¹ é‡Œçš„æŸ¥è¯¢ç»“æœå½“ä½œæ¥æºè¡¨ï¼ŒæŸ¥è¯¢å…¶ä¸­ total_sales éç©ºçš„è®°å½•</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_invoicing;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">FROM</span> (<br>    <span class="hljs-keyword">SELECT</span> <br>        client_id,<br>        name,<br>        (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> c.client_id) <span class="hljs-keyword">AS</span> total_sales,<br>        (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices) <span class="hljs-keyword">AS</span> average,<br>        (<span class="hljs-keyword">SELECT</span> total_sales <span class="hljs-operator">-</span> average) <span class="hljs-keyword">AS</span> difference   <br>    <span class="hljs-keyword">FROM</span> clients c<br>) <span class="hljs-keyword">AS</span> sales_summury #necessaryÂ·<br><span class="hljs-comment">/* åœ¨FROMä¸­ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå³ä½¿ç”¨ â€œæ´¾ç”Ÿè¡¨â€ æ—¶ï¼Œ</span><br><span class="hljs-comment">å¿…é¡»ç»™æ´¾ç”Ÿè¡¨å–ä¸ªåˆ«åï¼ˆä¸ç®¡ç”¨ä¸ç”¨ï¼‰ï¼Œè¿™æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œä¸å†™ä¼šæŠ¥é”™ï¼š</span><br><span class="hljs-comment">Error Code: 1248. Every derived tableï¼ˆæ´¾ç”Ÿè¡¨ã€å¯¼å‡ºè¡¨ï¼‰</span><br><span class="hljs-comment">must have its own alias */</span><br><span class="hljs-keyword">WHERE</span> total_sales <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br></code></pre></td></tr></table></figure>



<h2 id="ã€ç¬¬ä¸ƒç« ã€‘MySQLçš„åŸºæœ¬å‡½æ•°"><a href="#ã€ç¬¬ä¸ƒç« ã€‘MySQLçš„åŸºæœ¬å‡½æ•°" class="headerlink" title="ã€ç¬¬ä¸ƒç« ã€‘MySQLçš„åŸºæœ¬å‡½æ•°"></a>ã€ç¬¬ä¸ƒç« ã€‘MySQLçš„åŸºæœ¬å‡½æ•°</h2><h2 id="1-æ•°å€¼å‡½æ•°"><a href="#1-æ•°å€¼å‡½æ•°" class="headerlink" title="1. æ•°å€¼å‡½æ•°"></a>1. æ•°å€¼å‡½æ•°</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ROUND(<span class="hljs-number">5.7365</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">-- å››èˆäº”å…¥</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">TRUNCATE</span>(<span class="hljs-number">5.7365</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">-- æˆªæ–­</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CEILING</span>(<span class="hljs-number">5.2</span>)  <span class="hljs-comment">-- å¤©èŠ±æ¿å‡½æ•°ï¼Œå¤§äºç­‰äºæ­¤æ•°çš„æœ€å°æ•´æ•°</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">FLOOR</span>(<span class="hljs-number">5.6</span>)  <span class="hljs-comment">-- åœ°æ¿å‡½æ•°ï¼Œå°äºç­‰äºæ­¤æ•°çš„æœ€å¤§æ•´æ•°</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">ABS</span>(<span class="hljs-number">-5.2</span>)  <span class="hljs-comment">-- ç»å¯¹å€¼</span><br><span class="hljs-keyword">SELECT</span> RAND()  <span class="hljs-comment">-- éšæœºå‡½æ•°ï¼Œ0åˆ°1çš„éšæœºå€¼</span><br></code></pre></td></tr></table></figure>

<h2 id="2-å­—ç¬¦ä¸²å‡½æ•°"><a href="#2-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="2. å­—ç¬¦ä¸²å‡½æ•°"></a>2. å­—ç¬¦ä¸²å‡½æ•°</h2><ol>
<li>LENGTH, UPPER, LOWER</li>
<li>TRIM, LTRIM, RTRIM</li>
<li>LEFT, RIGHT, SUBSTRING</li>
<li>LOCATE, REPLACE, ã€CONCATã€‘</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- é•¿åº¦ã€è½¬å¤§å°å†™ï¼š</span><br><span class="hljs-keyword">SELECT</span> LENGTH(<span class="hljs-string">&#x27;sky&#x27;</span>)  <span class="hljs-comment">-- å­—ç¬¦ä¸²å­—ç¬¦ä¸ªæ•°/é•¿åº¦ï¼ˆLENGTHï¼‰</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">UPPER</span>(<span class="hljs-string">&#x27;sky&#x27;</span>)  <span class="hljs-comment">-- è½¬å¤§å†™</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">LOWER</span>(<span class="hljs-string">&#x27;Sky&#x27;</span>)  <span class="hljs-comment">-- è½¬å°å†™</span><br><br><span class="hljs-comment">-- å¤„ç†/ä¿®å‰ªï¼ˆtrimï¼‰å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ï¼ŒLã€R è¡¨ç¤º LEFTã€RIGHTï¼š</span><br><span class="hljs-keyword">SELECT</span> LTRIM(<span class="hljs-string">&#x27;  Sky&#x27;</span>)<br><span class="hljs-keyword">SELECT</span> RTRIM(<span class="hljs-string">&#x27;Sky  &#x27;</span>)<br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">TRIM</span>(<span class="hljs-string">&#x27; Sky &#x27;</span>)<br><br><span class="hljs-comment">-- åˆ‡ç‰‡</span><br><span class="hljs-comment">-- å–å·¦è¾¹ï¼Œå–å³è¾¹ï¼Œå–ä¸­é—´</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">LEFT</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment">-- å–å·¦è¾¹ï¼ˆLEFTï¼‰4ä¸ªå­—ç¬¦</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">RIGHT</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">6</span>)  <span class="hljs-comment">-- å–å³è¾¹ï¼ˆRIGHTï¼‰6ä¸ªå­—ç¬¦</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>)  <br><span class="hljs-comment">-- å–ä¸­é—´ä»ç¬¬7ä¸ªå¼€å§‹çš„é•¿åº¦ä¸º6çš„å­ä¸²ï¼ˆSUBSTRINGï¼‰</span><br><span class="hljs-comment">-- æ³¨æ„æ˜¯ä»ç¬¬1ä¸ªï¼ˆè€Œéç¬¬0ä¸ªï¼‰å¼€å§‹è®¡æ•°çš„</span><br><span class="hljs-comment">-- çœç•¥ç¬¬3å‚æ•°ï¼ˆå­ä¸²é•¿åº¦ï¼‰åˆ™ä¸€ç›´æˆªå–åˆ°æœ€å</span><br><br><span class="hljs-comment">-- å®šä½</span><br><span class="hljs-keyword">SELECT</span> LOCATE(<span class="hljs-string">&#x27;gar&#x27;</span>, <span class="hljs-string">&#x27;Kindergarden&#x27;</span>)  <span class="hljs-comment">-- å®šä½ï¼ˆLOCATEï¼‰é¦–æ¬¡å‡ºç°çš„ä½ç½®</span><br><span class="hljs-comment">-- æ²¡æœ‰çš„è¯è¿”å›0ï¼ˆå…¶ä»–ç¼–ç¨‹è¯­è¨€å¤§å¤šè¿”å›-1ï¼Œå¯èƒ½å› ä¸ºç´¢å¼•æ˜¯ä»0å¼€å§‹çš„ï¼‰</span><br><span class="hljs-comment">-- è¿™ä¸ªå®šä½/æŸ¥æ‰¾å‡½æ•°ä¾ç„¶æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„</span><br><br><span class="hljs-comment">-- æ›¿æ¢ï¼š</span><br><span class="hljs-keyword">SELECT</span> REPLACE(<span class="hljs-string">&#x27;Kindergarten&#x27;</span>, <span class="hljs-string">&#x27;garten&#x27;</span>, <span class="hljs-string">&#x27;garden&#x27;</span>)<br><br><span class="hljs-comment">-- è¿æ¥ï¼š</span><br>USE sql_store;<br><br><span class="hljs-keyword">SELECT</span> CONCAT(first_name, <span class="hljs-string">&#x27; &#x27;</span>, last_name) <span class="hljs-keyword">AS</span> full_name<br><span class="hljs-comment">-- concatenate v. è¿æ¥</span><br><span class="hljs-keyword">FROM</span> customers<br></code></pre></td></tr></table></figure>



<h2 id="3-MySQLä¸­çš„æ—¥æœŸå‡½æ•°"><a href="#3-MySQLä¸­çš„æ—¥æœŸå‡½æ•°" class="headerlink" title="3. MySQLä¸­çš„æ—¥æœŸå‡½æ•°"></a>3. MySQLä¸­çš„æ—¥æœŸå‡½æ•°</h2><ol>
<li>NOW, CURDATE, CURTIME</li>
<li>YEAR, MONTH, DAY, HOUR, MINUTE, SECOND, DAYNAME, MONTHNAME</li>
<li>EXTRACT(å•ä½ FROM æ—¥æœŸæ—¶é—´å¯¹è±¡)ï¼Œ å¦‚ EXTRACT(YEAR FROM NOW())</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- å½“å‰æ—¶é—´</span><br><span class="hljs-keyword">SELECT</span> NOW()  <span class="hljs-comment">-- 2020-09-12 08:50:46</span><br><span class="hljs-keyword">SELECT</span> CURDATE()  <span class="hljs-comment">-- current date, 2020-09-12</span><br><span class="hljs-keyword">SELECT</span> CURTIME()  <span class="hljs-comment">-- current time, 08:50:46</span><br><br><span class="hljs-comment">-- æå–æ—¶é—´æ—¥æœŸå¯¹è±¡ä¸­çš„å…ƒç´ </span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">YEAR</span>(NOW())  <span class="hljs-comment">-- 2020</span><br><span class="hljs-comment">-- è¿˜æœ‰MONTH, DAY, HOUR, MINUTE, SECOND</span><br><br><span class="hljs-keyword">SELECT</span> DAYNAME(NOW())  <span class="hljs-comment">-- Saturday</span><br><span class="hljs-keyword">SELECT</span> MONTHNAME(NOW())  <span class="hljs-comment">-- September</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">YEAR</span> <span class="hljs-keyword">FROM</span> NOW())<br><span class="hljs-comment">-- EXTRACT(å•ä½ FROM æ—¥æœŸæ—¶é—´å¯¹è±¡)</span><br></code></pre></td></tr></table></figure>



<h2 id="4-æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´"><a href="#4-æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="4. æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´"></a>4. æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´</h2><p><code>DATE_FORMAT(date, format)</code> å°† date æ ¹æ® format å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<p><code>TIME_FORMAT(time, format)</code> ç±»ä¼¼äº DATE_FORMAT å‡½æ•°ï¼Œä½†è¿™é‡Œ format å­—ç¬¦ä¸²åªèƒ½åŒ…å«ç”¨äºå°æ—¶ï¼Œåˆ†é’Ÿï¼Œç§’å’Œå¾®ç§’çš„æ ¼å¼è¯´æ˜ç¬¦ã€‚å…¶ä»–è¯´æ˜ç¬¦äº§ç”Ÿä¸€ä¸ª NULL å€¼æˆ–0ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATE_FORMAT(NOW(), <span class="hljs-string">&#x27;%M %d, %Y&#x27;</span>)  <span class="hljs-comment">-- September 12, 2020</span><br><span class="hljs-comment">-- æ ¼å¼è¯´æ˜ç¬¦é‡Œï¼Œå¤§å°å†™æ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯ç›®å‰SQLé‡Œç¬¬ä¸€æ¬¡å‡ºç°å¤§å°å†™ä¸åŒçš„æƒ…å†µ</span><br><span class="hljs-keyword">SELECT</span> TIME_FORMAT(NOW(), <span class="hljs-string">&#x27;%H:%i %p&#x27;</span>)  <span class="hljs-comment">-- 11:07 AM</span><br></code></pre></td></tr></table></figure>

<h2 id="5-è®¡ç®—æ—¥æœŸå’Œæ—¶é—´"><a href="#5-è®¡ç®—æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="5. è®¡ç®—æ—¥æœŸå’Œæ—¶é—´"></a>5. è®¡ç®—æ—¥æœŸå’Œæ—¶é—´</h2><p>æœ‰æ—¶éœ€è¦å¯¹æ—¥æœŸäº‹ä»¶å¯¹è±¡è¿›è¡Œè¿ç®—ï¼Œå¦‚å¢åŠ ä¸€å¤©æˆ–ç®—ä¸¤ä¸ªæ—¶é—´çš„å·®å€¼ä¹‹ç±»ï¼Œä»‹ç»ä¸€äº›æœ€æœ‰ç”¨çš„æ—¥æœŸæ—¶é—´è®¡ç®—å‡½æ•°ï¼š</p>
<ol>
<li>DATE_ADD, DATE_SUB</li>
<li>DATEDIFF</li>
<li>TIME_TO_SEC</li>
</ol>
<p>å¢åŠ æˆ–å‡å°‘ä¸€å®šçš„å¤©æ•°ã€æœˆæ•°ã€å¹´æ•°ã€å°æ—¶æ•°ç­‰ç­‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATE_ADD(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">-1</span> <span class="hljs-keyword">DAY</span>)<br><span class="hljs-keyword">SELECT</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">YEAR</span>)<br></code></pre></td></tr></table></figure>

<p>è®¡ç®—æ—¥æœŸå·®å¼‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATEDIFF(<span class="hljs-string">&#x27;2019-01-01 09:00&#x27;</span>, <span class="hljs-string">&#x27;2019-01-05&#x27;</span>)  <span class="hljs-comment">-- -4</span><br><span class="hljs-comment">-- ä¼šå¿½ç•¥æ—¶é—´éƒ¨åˆ†ï¼Œåªç®—æ—¥æœŸå·®å¼‚</span><br><br><span class="hljs-comment">-- å€ŸåŠ© TIME_TO_SEC å‡½æ•°è®¡ç®—æ—¶é—´å·®å¼‚</span><br><span class="hljs-comment">-- TIME_TO_SECï¼šè®¡ç®—ä» 00:00 åˆ°æŸæ—¶é—´ç»å†çš„ç§’æ•°</span><br><br><span class="hljs-keyword">SELECT</span> TIME_TO_SEC(<span class="hljs-string">&#x27;09:00&#x27;</span>)  <span class="hljs-comment">-- 32400</span><br><span class="hljs-keyword">SELECT</span> TIME_TO_SEC(<span class="hljs-string">&#x27;09:00&#x27;</span>) <span class="hljs-operator">-</span> TIME_TO_SEC(<span class="hljs-string">&#x27;09:02&#x27;</span>)  <span class="hljs-comment">-- -120</span><br></code></pre></td></tr></table></figure>

<h2 id="6-IFNULLå’ŒCOALESCEå‡½æ•°"><a href="#6-IFNULLå’ŒCOALESCEå‡½æ•°" class="headerlink" title="6. IFNULLå’ŒCOALESCEå‡½æ•°"></a>6. IFNULLå’ŒCOALESCEå‡½æ•°</h2><p>ä¸¤ä¸ªç”¨æ¥æ›¿æ¢ç©ºå€¼çš„å‡½æ•°ï¼šIFNULL, COALESCE. åè€…æ›´çµæ´»</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span><br>	order_id,<br>	IFNULL(shipper_id,<span class="hljs-string">&#x27;Not Assigned&#x27;</span>) <span class="hljs-keyword">AS</span> shipper<br><span class="hljs-keyword">FROM</span> orders<br> <span class="hljs-comment">/* If expr1 is not NULL, IFNULL() returns expr1; </span><br><span class="hljs-comment">    otherwise it returns expr2. */</span><br>    <br>USE sql_store;<br><span class="hljs-keyword">SELECT</span> <br>    order_id,<br>    <span class="hljs-built_in">COALESCE</span>(shipper_id, comments, <span class="hljs-string">&#x27;Not Assigned&#x27;</span>) <span class="hljs-keyword">AS</span> shipper<br>    <span class="hljs-comment">/* Returns the first non-NULL value in the list, </span><br><span class="hljs-comment">    or NULL if there are no non-NULLvalues. */</span><br>    <span class="hljs-comment">-- COALESCE å‡½æ•°æ˜¯è¿”å›ä¸€ç³»åˆ—å€¼ä¸­çš„é¦–ä¸ªéç©ºå€¼ï¼Œæ›´çµæ´»</span><br><span class="hljs-keyword">FROM</span> orders   <br></code></pre></td></tr></table></figure>



<h2 id="7-IFå‡½æ•°"><a href="#7-IFå‡½æ•°" class="headerlink" title="7. IFå‡½æ•°"></a>7. IFå‡½æ•°</h2><p><code>IF(æ¡ä»¶è¡¨è¾¾å¼, è¿”å›å€¼1, è¿”å›å€¼2)</code> è¿”å›å€¼å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œæ•°å€¼ æ–‡æœ¬ æ—¥æœŸæ—¶é—´ ç©ºå€¼null å‡å¯</p>
<p><strong>ç»ƒä¹ </strong></p>
<p>å¾—åˆ°åŒ…å«å¦‚ä¸‹å­—æ®µçš„è¡¨ï¼š</p>
<ol>
<li>product_id</li>
<li>name (äº§å“åç§°)</li>
<li>orders (è¯¥äº§å“å‡ºç°åœ¨è®¢å•ä¸­çš„æ¬¡æ•°)</li>
<li>frequency (æ ¹æ®æ˜¯å¦å¤šäºä¸€æ¬¡è€Œåˆ†ç±»ä¸ºâ€™Onceâ€™æˆ–â€™Many timesâ€™)</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span> <br>	product_id,<br>    name,<br>    <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> orders,<br>    IF(<span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)<span class="hljs-operator">=</span><span class="hljs-number">1</span>,<span class="hljs-string">&#x27;Once&#x27;</span>,<span class="hljs-string">&#x27;Many times&#x27;</span>) <span class="hljs-keyword">AS</span> frequency<br><span class="hljs-keyword">FROM</span> products  <br><span class="hljs-keyword">JOIN</span> order_items <span class="hljs-keyword">USING</span>(product_id)<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> product_id<br><br><span class="hljs-comment">-- æ³¨æ„ï¼šå…ˆåˆ†ç»„(group by)å†è®¡æ•°(count)</span><br></code></pre></td></tr></table></figure>

<h2 id="8-CASEè¿ç®—ç¬¦"><a href="#8-CASEè¿ç®—ç¬¦" class="headerlink" title="8. CASEè¿ç®—ç¬¦"></a>8. CASEè¿ç®—ç¬¦</h2><p>å½“åˆ†ç±»å¤šä½™ä¸¤ç§æ—¶ï¼Œå¯ä»¥ç”¨IFåµŒå¥—ï¼Œä¹Ÿå¯ä»¥ç”¨CASEè¯­å¥ï¼Œåè€…å¯è¯»æ€§æ›´å¥½</p>
<p>CASEè¯­å¥ç»“æ„ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CASE</span> <br>    <span class="hljs-keyword">WHEN</span> â€¦â€¦ <span class="hljs-keyword">THEN</span> â€¦â€¦<br>    <span class="hljs-keyword">WHEN</span> â€¦â€¦ <span class="hljs-keyword">THEN</span> â€¦â€¦<br>    <span class="hljs-keyword">WHEN</span> â€¦â€¦ <span class="hljs-keyword">THEN</span> â€¦â€¦<br>    â€¦â€¦<br>    [<span class="hljs-keyword">ELSE</span> â€¦â€¦] ï¼ˆ<span class="hljs-keyword">ELSE</span>å­å¥æ˜¯å¯é€‰çš„ï¼‰<br><span class="hljs-keyword">END</span><br></code></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ </strong></p>
<p>å¾—åˆ°åŒ…å«å¦‚ä¸‹å­—æ®µçš„è¡¨ï¼šcustomer, points, categoryï¼ˆæ ¹æ®ç§¯åˆ† &lt;2kã€2k~3kï¼ˆåŒ…å«ä¸¤ç«¯ï¼‰ã€&gt;3k åˆ†ä¸ºé’é“œã€ç™½é“¶å’Œé»„é‡‘ç”¨æˆ·ï¼‰</p>
<p>ä¹‹å‰ä¹Ÿæ˜¯ç”¨è¿‡ UNION æ³•ï¼Œåˆ†åˆ«æŸ¥è¯¢å¢åŠ åˆ†ç±»å­—æ®µå†åˆå¹¶ï¼Œå¾ˆéº»çƒ¦ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE sql_store;<br><span class="hljs-keyword">SELECT</span> <br>	CONCAT(first_name,<span class="hljs-string">&#x27;&#x27;</span>,last_name) <span class="hljs-keyword">AS</span> customer,<br>	points,<br>	<span class="hljs-keyword">CASE</span><br>		<span class="hljs-keyword">WHEN</span> points <span class="hljs-operator">&lt;</span> <span class="hljs-number">2000</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">&#x27;Bronze&#x27;</span><br>        <span class="hljs-keyword">WHEN</span> points <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2000</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">3000</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">&#x27;Silver&#x27;</span><br>        <span class="hljs-keyword">WHEN</span> points <span class="hljs-operator">&gt;</span> <span class="hljs-number">3000</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">&#x27;Gold&#x27;</span><br>    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> category<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">ORDER</span>  <span class="hljs-keyword">BY</span> points <span class="hljs-keyword">DESC</span><br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/" class="category-chain-item">æ•°æ®ç§‘å­¦</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MySQL/" class="print-no-link">#MySQL</a>
      
        <a href="/tags/Coding/" class="print-no-link">#Coding</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQLè¯»ä¹¦ç¬”è®°</div>
      <div>http://example.com/2023/11/05/sql-mosh/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>zhizhia</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´11æœˆ5æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/07/%E5%AE%9E%E7%94%A8%E6%9C%80%E4%BC%98%E5%8C%96/" title="å®ç”¨æœ€ä¼˜åŒ–">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">å®ç”¨æœ€ä¼˜åŒ–</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/02/%E6%B3%9B%E5%87%BD%E5%88%86%E6%9E%90/" title="æ³›å‡½åˆ†æ">
                        <span class="hidden-mobile">æ³›å‡½åˆ†æ</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"7DcKf76sOwcvZ74oFU6BeMvA-gzGzoHsz","appKey":"G62zSvWl1OMBRu3NWJjOea38","path":"window.location.pathname","placeholder":"åæ§½","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
